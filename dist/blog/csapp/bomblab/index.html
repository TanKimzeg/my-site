<!DOCTYPE html><html class=bg-base-300 data-theme=winter data-theme-type=light lang=en><head><meta content=true name=astro-view-transitions-enabled><meta content=animate name=astro-view-transitions-fallback><script type=module src=/_astro/ClientRouter.astro_astro_type_script_index_0_lang.waUwC-PJ.js></script><script src=/_astro/vanilla.ChgcMPTJ.js data-astro-rerun></script><script type=module src=/_astro/PointerOnNavigation.astro_astro_type_script_index_0_lang.Dwfd1XXs.js></script><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><link href=/favicon.svg rel=icon type=image><meta content="Astro v5.13.7" name=generator><meta content="Bomblab records" name=description><meta content=Bomblab property=og:title><meta content="Bomblab records" property=og:description><meta content=https://tankimzeg.top/og/csapp/bomblab.png property=og:image><link href=https://tankimzeg.top/blog/csapp/bomblab/ rel=canonical><title>Bomblab - TanKimzeg</title><script>!function(){const e="winter",t="dracula";!function(){const a=localStorage.getItem("theme"),m=window.matchMedia("(prefers-color-scheme: dark)").matches;let c;a?c=a:(c=m?t:e,localStorage.setItem("theme",c)),document.documentElement.setAttribute("data-theme",c);const o=c===t?"dark":"light";document.documentElement.setAttribute("data-theme-type",o),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(a=>{if(!localStorage.getItem("theme")){const m=a.matches?t:e;document.documentElement.setAttribute("data-theme",m);const c=a.matches?"dark":"light";document.documentElement.setAttribute("data-theme-type",c),localStorage.setItem("theme",m)}}))}()}()</script><link href=/_astro/about.BB1pbI9A.css rel=stylesheet><style>.modal-backdrop[data-astro-cid-zux26muy] button[data-astro-cid-zux26muy]{cursor:default;width:100%;height:100%;opacity:0}.card-body .btn-category,.card-body .btn-tag{text-decoration:none}</style></head><body class="flex flex-col min-h-screen" data-pagefind-body=true><nav class="w-full bg-base-100 shadow-lg ease-in-out transform transition-transform delay-300 duration-500 fixed md:hidden navbar px-2 text-center z-50" id=navbar><div class=navbar-start><label class="btn btn-circle bg-base-100 btn-md swap swap-rotate"><span class=sr-only>Toggle menu</span> <input type=checkbox id=menu-toggle> <svg height=1em width=1em data-icon=lucide:menu class="h-5 w-5 swap-off"><symbol id=ai:lucide:menu viewBox="0 0 24 24"><path d="M4 5h16M4 12h16M4 19h16" fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 /></symbol><use href=#ai:lucide:menu></use></svg> <svg height=1em width=1em data-icon=lucide:x class="h-5 w-5 swap-on"><symbol id=ai:lucide:x viewBox="0 0 24 24"><path d="M18 6L6 18M6 6l12 12" fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 /></symbol><use href=#ai:lucide:x></use></svg></label></div><div class=navbar-center><a href=/ class="btn btn-ghost hover:scale-105 transition-transform duration-300 text-xl">TanKimzeg&#39;s Blog</a></div><div class=navbar-end><button title="Theme Toggle" aria-label="Toggle theme" class="btn btn-circle hover:scale-110 bg-base-100 btn-md shadow-sm md:border-base-content/20 navbar-theme" data-astro-cid-mjqc4hpp data-theme-toggle id=theme-toggle-37mb7f7yq><svg height=1em width=1em data-icon=lucide:sun class="h-5 w-5 theme-toggle-icon sun-icon" data-astro-cid-mjqc4hpp=true><symbol id=ai:lucide:sun viewBox="0 0 24 24"><g fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2><circle cx=12 cy=12 r=4 /><path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/></g></symbol><use href=#ai:lucide:sun></use></svg> <svg height=1em width=1em data-icon=lucide:moon class="h-5 w-5 theme-toggle-icon hidden moon-icon" data-astro-cid-mjqc4hpp=true><symbol id=ai:lucide:moon viewBox="0 0 24 24"><path d="M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401" fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 /></symbol><use href=#ai:lucide:moon></use></svg></button><script>!function(){const e="winter",t="dracula",n=(e,t)=>{if(!e)return;const n=e.querySelector(".sun-icon"),d=e.querySelector(".moon-icon");n&&d&&(t?(n.classList.remove("hidden"),d.classList.add("hidden")):(n.classList.add("hidden"),d.classList.remove("hidden")))};document.addEventListener("astro:page-load",(()=>{const d=document.getElementById("theme-toggle-37mb7f7yq");if(!d)return;const o=document.documentElement.getAttribute("data-theme");n(d,o===t),d.addEventListener("click",(()=>{const o=document.documentElement.getAttribute("data-theme")===e?t:e;d.classList.add("animate-spin-once"),document.documentElement.setAttribute("data-theme",o);const c=o===t?"dark":"light";document.documentElement.setAttribute("data-theme-type",c),localStorage.setItem("theme",o);document.querySelectorAll("[data-theme-toggle]").forEach((e=>{n(e,o===t)})),setTimeout((()=>{d.classList.remove("animate-spin-once")}),300)}))}))}()</script></div><div class="w-full bg-base-100 shadow-lg ease-in-out transform transition-transform -translate-x-full absolute duration-300 left-0 top-full" id=header-menu><ul class="w-full bg-transparent menu p-2"><li class="relative w-full group"><a href=/ class="flex items-center rounded-lg hover:bg-base-200 font-bold p-3 text-lg" target=_self><svg height=1em width=1em data-icon=material-symbols:home-outline-rounded class="h-5 w-5 mr-2"><symbol id=ai:material-symbols:home-outline-rounded viewBox="0 0 24 24"><path d="M6 19h3v-5q0-.425.288-.712T10 13h4q.425 0 .713.288T15 14v5h3v-9l-6-4.5L6 10zm-2 0v-9q0-.475.213-.9t.587-.7l6-4.5q.525-.4 1.2-.4t1.2.4l6 4.5q.375.275.588.7T20 10v9q0 .825-.588 1.413T18 21h-4q-.425 0-.712-.288T13 20v-5h-2v5q0 .425-.288.713T10 21H6q-.825 0-1.412-.587T4 19m8-6.75" fill=currentColor /></symbol><use href=#ai:material-symbols:home-outline-rounded></use></svg> <span>Home</span></a></li><li class="relative w-full group"><a href=/about class="flex items-center rounded-lg hover:bg-base-200 font-bold p-3 text-lg" target=_self><svg height=1em width=1em data-icon=material-symbols:info-outline-rounded class="h-5 w-5 mr-2"><symbol id=ai:material-symbols:info-outline-rounded viewBox="0 0 24 24"><path d="M12 17q.425 0 .713-.288T13 16v-4q0-.425-.288-.712T12 11t-.712.288T11 12v4q0 .425.288.713T12 17m0-8q.425 0 .713-.288T13 8t-.288-.712T12 7t-.712.288T11 8t.288.713T12 9m0 13q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12t-2.325-5.675T12 4T6.325 6.325T4 12t2.325 5.675T12 20m0-8" fill=currentColor /></symbol><use href=#ai:material-symbols:info-outline-rounded></use></svg> <span>About</span></a></li><li class="relative w-full group"><details open><summary class="flex items-center rounded-lg hover:bg-base-200 font-bold p-3 text-lg"><svg height=1em width=1em data-icon=material-symbols:book-2-outline-rounded class="h-5 w-5 mr-2"><symbol id=ai:material-symbols:book-2-outline-rounded viewBox="0 0 24 24"><path d="M6 15.325q.35-.175.725-.25T7.5 15H8V4h-.5q-.625 0-1.062.438T6 5.5zM10 15h8V4h-8zm-4 .325V4zM7.5 22q-1.45 0-2.475-1.025T4 18.5v-13q0-1.45 1.025-2.475T7.5 2H18q.825 0 1.413.587T20 4v12.525q0 .2-.162.363t-.588.362q-.35.175-.55.5t-.2.75t.2.763t.55.487t.55.413t.2.562v.25q0 .425-.288.725T19 22zm0-2h9.325q-.15-.35-.237-.712T16.5 18.5q0-.4.075-.775t.25-.725H7.5q-.65 0-1.075.438T6 18.5q0 .65.425 1.075T7.5 20" fill=currentColor /></symbol><use href=#ai:material-symbols:book-2-outline-rounded></use></svg> <span>Blogs</span></summary><ul class=pl-4><li><a href=/blog class="flex items-center rounded-lg hover:bg-base-200 p-2" target=_self><svg height=1em width=1em data-icon=material-symbols:ink-pen-outline-rounded class="h-4 w-4 mr-2"><symbol id=ai:material-symbols:ink-pen-outline-rounded viewBox="0 0 24 24"><path d="m12.25 10.825l.925.925L18.6 6.325l-.925-.925zM5 19h.925l5.825-5.825l-.925-.925L5 18.075zm8.875-5.125l-3.75-3.75L14.3 5.95l-.725-.725L8.8 10q-.3.3-.7.3t-.7-.3t-.3-.712t.3-.713l4.75-4.75q.6-.6 1.413-.6t1.412.6l.725.725l1.25-1.25q.3-.3.713-.3t.712.3L20.7 5.625q.3.3.3.712t-.3.713zM4 21q-.425 0-.712-.288T3 20v-1.925q0-.4.15-.763t.425-.637l6.55-6.55l3.75 3.75l-6.55 6.55q-.275.275-.638.425t-.762.15z" fill=currentColor /></symbol><use href=#ai:material-symbols:ink-pen-outline-rounded></use></svg> <span>All blogs</span></a></li><li><a href=/blog/category/tech class="flex items-center rounded-lg hover:bg-base-200 p-2" target=_self><svg height=1em width=1em data-icon=material-symbols:deployed-code-outline class="h-4 w-4 mr-2"><symbol id=ai:material-symbols:deployed-code-outline viewBox="0 0 24 24"><path d="M11 19.425v-6.85L5 9.1v6.85zm2 0l6-3.475V9.1l-6 3.475zm-1-8.575l5.925-3.425L12 4L6.075 7.425zM4 17.7q-.475-.275-.737-.725t-.263-1v-7.95q0-.55.263-1T4 6.3l7-4.025Q11.475 2 12 2t1 .275L20 6.3q.475.275.738.725t.262 1v7.95q0 .55-.262 1T20 17.7l-7 4.025Q12.525 22 12 22t-1-.275zm8-5.7" fill=currentColor /></symbol><use href=#ai:material-symbols:deployed-code-outline></use></svg> <span>Tech Blogs</span></a></li><li><a href=/blog/category/life class="flex items-center rounded-lg hover:bg-base-200 p-2" target=_self><svg height=1em width=1em data-icon=material-symbols:earthquake-rounded class="h-4 w-4 mr-2"><symbol id=ai:material-symbols:earthquake-rounded viewBox="0 0 24 24"><path d="M9.025 22q-.35 0-.612-.187T8.05 21.3L5.5 13H3q-.425 0-.712-.288T2 12t.288-.712T3 11h3.25q.325 0 .588.188t.362.512l1.65 5.375L12.025 2.8q.075-.35.35-.575T13 2t.625.213t.35.562l2.175 9.4l1.4-4.475q.1-.325.362-.512T18.5 7t.575.175t.375.475L20.7 11h.3q.425 0 .713.288T22 12t-.288.713T21 13h-1q-.325 0-.575-.175t-.375-.475l-.475-1.275L16.95 16.3q-.1.325-.375.525T15.95 17t-.6-.238t-.325-.537L13 7.525l-3.025 13.7q-.075.35-.337.55T9.025 22" fill=currentColor /></symbol><use href=#ai:material-symbols:earthquake-rounded></use></svg> <span>Life Blogs</span></a></li></ul></details></li><li class="relative w-full group"><a href=/project class="flex items-center rounded-lg hover:bg-base-200 font-bold p-3 text-lg" target=_self><svg height=1em width=1em data-icon=material-symbols:code-blocks-outline class="h-5 w-5 mr-2"><symbol id=ai:material-symbols:code-blocks-outline viewBox="0 0 24 24"><path d="m9.6 15.6l1.4-1.425L8.825 12L11 9.825L9.6 8.4L6 12zm4.8 0L18 12l-3.6-3.6L13 9.825L15.175 12L13 14.175zM5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v14q0 .825-.587 1.413T19 21zm0-2h14V5H5zM5 5v14z" fill=currentColor /></symbol><use href=#ai:material-symbols:code-blocks-outline></use></svg> <span>Project</span></a></li><li class="relative w-full group"><a href=/friend class="flex items-center rounded-lg hover:bg-base-200 font-bold p-3 text-lg" target=_self><svg height=1em width=1em data-icon=material-symbols:supervisor-account-outline-rounded class="h-5 w-5 mr-2"><symbol id=ai:material-symbols:supervisor-account-outline-rounded viewBox="0 0 24 24"><path d="M17 15q-1.05 0-1.775-.725T14.5 12.5t.725-1.775T17 10t1.775.725t.725 1.775t-.725 1.775T17 15m-5 4v-.4q0-.6.313-1.112t.887-.738q.9-.375 1.863-.562T17 16t1.938.188t1.862.562q.575.225.888.738T22 18.6v.4q0 .425-.288.713T21 20h-8q-.425 0-.712-.288T12 19m-2-7q-1.65 0-2.825-1.175T6 8t1.175-2.825T10 4t2.825 1.175T14 8t-1.175 2.825T10 12m-8 5.2q0-.85.425-1.562T3.6 14.55q1.5-.75 3.113-1.15T10 13q.875 0 1.75.15t1.75.35l-.85.85l-.85.85q-.45-.125-.9-.162T10 15q-1.45 0-2.838.35t-2.662 1q-.25.125-.375.35T4 17.2v.8h6v.975q0 .325.125.588t.35.437H4q-.825 0-1.412-.587T2 18zm8-7.2q.825 0 1.413-.587T12 8t-.587-1.412T10 6t-1.412.588T8 8t.588 1.413T10 10" fill=currentColor /></symbol><use href=#ai:material-symbols:supervisor-account-outline-rounded></use></svg> <span>Friend</span></a></li></ul></div></nav><script type=module>document.addEventListener("astro:page-load",(()=>{let e=window.scrollY;const t=document.getElementById("navbar"),s=document.getElementById("header-menu"),a=document.getElementById("menu-toggle");if(!t||!s||!a)return;a.addEventListener("change",(()=>{a.checked?(s.classList.remove("-translate-x-full"),s.classList.add("translate-x-0")):(s.classList.add("-translate-x-full"),s.classList.remove("translate-x-0"))}));let l=!1;window.addEventListener("scroll",(()=>{l||(window.requestAnimationFrame((()=>{!t||!s||!a||(window.scrollY>e&&window.scrollY>50?(t.classList.add("-translate-y-full","duration-500"),t.classList.remove("translate-y-0"),a.checked&&(a.checked=!1,s.classList.add("-translate-x-full"),s.classList.remove("translate-x-0"))):window.scrollY<e&&(t.classList.remove("-translate-y-full"),t.classList.add("translate-y-0","duration-300")),e=window.scrollY),l=!1})),l=!0)})),document.addEventListener("click",(e=>{if(!t||!s||!a)return;const l=e.target;!t.contains(l)&&s.classList.contains("translate-x-0")&&(a.checked=!1,s.classList.add("-translate-x-full"),s.classList.remove("translate-x-0"))})),document.querySelectorAll("#header-menu a").forEach((e=>{e.addEventListener("click",(()=>{!s||!a||a.checked&&(a.checked=!1,s.classList.add("-translate-x-full"),s.classList.remove("translate-x-0"))}))}))}))</script><div class="w-full flex-grow max-w-6xl mx-auto"><div class="gap-4 grid lg:grid-cols-4 grid-cols-1 h-full md:grid-cols-5 p-4"><main class="flex flex-col gap-4 bg-transparent col-span-1 lg:col-span-3 md:col-span-4 md:mt-0 md:order-2 mt-16 order-1"><div class="flex flex-col gap-4 flex-grow"><div class="w-full bg-base-100 shadow-lg rounded-xl overflow-hidden"><div class="pt-6 px-6"><h1 class="text-xl font-bold lg:text-4xl sm:text-2xl">Bomblab</h1><p class="text-sm mt-2 text-base-content/80">Bomblab records</p></div><div class="sm:p-6 p-4"><div class="flex flex-col gap-y-2 mb-4 opacity-75 sm:flex-row sm:justify-between sm:text-sm text-xs"><div class="flex items-center flex-wrap gap-x-4 gap-y-2"><span class="flex items-center gap-1"><svg height=1em width=1em data-icon=lucide:calendar class="h-4 w-4 flex-shrink-0"><symbol id=ai:lucide:calendar viewBox="0 0 24 24"><g fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2><path d="M8 2v4m8-4v4"/><rect height=18 rx=2 width=18 x=3 y=4 /><path d="M3 10h18"/></g></symbol><use href=#ai:lucide:calendar></use></svg> <span class=truncate>Sun Jan 19 2025</span></span></div><div class="flex items-center gap-1 flex-wrap"><svg height=1em width=1em data-icon=lucide:book-open class="h-4 w-4 flex-shrink-0"><symbol id=ai:lucide:book-open viewBox="0 0 24 24"><path d="M12 7v14m-9-3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4a4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3a3 3 0 0 0-3-3z" fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 /></symbol><use href=#ai:lucide:book-open></use></svg> <span class=truncate>4946 words · 33 minutes</span></div></div><div class=mb-6><div class="flex items-center flex-wrap gap-2"><a href=/blog/category/tech class="btn btn-xs btn-category"><svg height=1em width=1em data-icon=lucide:folder class="h-4 w-4" viewBox="0 0 24 24"><use href=#ai:lucide:folder></use></svg> <span>tech</span> </a><a href=/blog/tag/csapp class="btn btn-xs btn-tag"><svg height=1em width=1em data-icon=lucide:tag class="h-4 w-4" viewBox="0 0 24 24"><use href=#ai:lucide:tag></use></svg> <span>csapp</span> </a><a href=/blog/tag/csapplab class="btn btn-xs btn-tag"><svg height=1em width=1em data-icon=lucide:tag class="h-4 w-4" viewBox="0 0 24 24"><use href=#ai:lucide:tag></use></svg> <span>csapplab</span></a></div></div><div class=mt-8><div class="max-w-none prose prose-headings:scroll-mt-20 prose-img:mx-auto prose-img:rounded-xl" id=content><h1 id=入手准备>入手准备</h1><p>首先,确保Linux上安装了gdb:</p><div class=expressive-code><link href=/_astro/ec.oj3b7.css rel=stylesheet><script type=module src=/_astro/ec.p1z7b.js></script><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#B392F0>sudo</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>apt</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>update</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span style=--0:#B392F0>sudo</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>apt-get</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>install</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>gdb</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="sudo apt updatesudo apt-get install gdb" data-copied=Copied!><div></div></button></div></figure></div><p>在bomb.c文件中的是main()函数,这里截取主要部分,看到程序逻辑:</p><div class=expressive-code><figure class=frame><figcaption class=header></figcaption><pre data-language=c><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#F97583>#include</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;stdio.h></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span style=--0:#F97583>#include</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;stdlib.h></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>3</div></div><div class=code><span style=--0:#F97583>#include</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>"support.h"</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>4</div></div><div class=code><span style=--0:#F97583>#include</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>"phases.h"</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>5</div></div><div class=code>
</div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>6</div></div><div class=code><span style=--0:#99A0A6>/*  * Note to self: Remember to erase this file so my victims will have no</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>7</div></div><div class=code><span class=indent><span style=--0:#99A0A6> </span></span><span style=--0:#99A0A6>* idea what is going on, and so they will all blow up in a</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>8</div></div><div class=code><span class=indent><span style=--0:#99A0A6> </span></span><span style=--0:#99A0A6>* spectaculary fiendish explosion. -- Dr. Evil  */</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>9</div></div><div class=code>
</div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>10</div></div><div class=code><span style=--0:#E1E4E8>FILE </span><span style=--0:#F97583>*</span><span style=--0:#E1E4E8>infile;</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>11</div></div><div class=code>
</div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>12</div></div><div class=code><span style=--0:#F97583>int</span><span style=--0:#E1E4E8> </span><span style=--0:#B392F0>main</span><span style=--0:#E1E4E8>(</span><span style=--0:#F97583>int</span><span style=--0:#E1E4E8> argc, </span><span style=--0:#F97583>char</span><span style=--0:#E1E4E8> </span><span style=--0:#F97583>*</span><span style=--0:#FFAB70>argv</span><span style=--0:#F97583>[]</span><span style=--0:#E1E4E8>)</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>13</div></div><div class=code><span style=--0:#E1E4E8>{</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>14</div></div><div class=code><span class=indent>    </span><span style=--0:#F97583>char</span><span style=--0:#E1E4E8> </span><span style=--0:#F97583>*</span><span style=--0:#E1E4E8>input;</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>15</div></div><div class=code>
</div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>16</div></div><div class=code>
</div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>17</div></div><div class=code><span class=indent><span style=--0:#99A0A6>    </span></span><span style=--0:#99A0A6>// 这里略去输入重定向的处理...</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>18</div></div><div class=code>
</div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>19</div></div><div class=code>
</div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>20</div></div><div class=code><span style=--0:#99A0A6>/* Do all sorts of secret stuff that makes the bomb harder to defuse. */</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>21</div></div><div class=code><span class=indent>    </span><span style=--0:#B392F0>initialize_bomb</span><span style=--0:#E1E4E8>();</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>22</div></div><div class=code>
</div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>23</div></div><div class=code><span class=indent>    </span><span style=--0:#B392F0>printf</span><span style=--0:#E1E4E8>(</span><span style=--0:#9ECBFF>"Welcome to my fiendish little bomb. You have 6 phases with</span><span style=--0:#79B8FF>\n</span><span style=--0:#9ECBFF>"</span><span style=--0:#E1E4E8>);</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>24</div></div><div class=code><span class=indent>    </span><span style=--0:#B392F0>printf</span><span style=--0:#E1E4E8>(</span><span style=--0:#9ECBFF>"which to blow yourself up. Have a nice day!</span><span style=--0:#79B8FF>\n</span><span style=--0:#9ECBFF>"</span><span style=--0:#E1E4E8>);</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>25</div></div><div class=code>
</div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>26</div></div><div class=code><span class=indent><span style=--0:#99A0A6>    </span></span><span style=--0:#99A0A6>/* Hmm...  Six phases must be more secure than one phase! */</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>27</div></div><div class=code><span class=indent><span style=--0:#E1E4E8>    </span></span><span style=--0:#E1E4E8>input </span><span style=--0:#F97583>=</span><span style=--0:#E1E4E8> </span><span style=--0:#B392F0>read_line</span><span style=--0:#E1E4E8>();</span><span style=--0:#99A0A6>             /* Get input                   */</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>28</div></div><div class=code><span class=indent>    </span><span style=--0:#B392F0>phase_1</span><span style=--0:#E1E4E8>(input);</span><span style=--0:#99A0A6>                  /* Run the phase               */</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>29</div></div><div class=code><span class=indent>    </span><span style=--0:#B392F0>phase_defused</span><span style=--0:#E1E4E8>();</span><span style=--0:#99A0A6>                 /* Drat!  They figured it out!</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>30</div></div><div class=code><span class=indent><span style=--0:#99A0A6>                      </span></span><span style=--0:#99A0A6>* Let me know how they did it. */</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>31</div></div><div class=code><span class=indent>    </span><span style=--0:#B392F0>printf</span><span style=--0:#E1E4E8>(</span><span style=--0:#9ECBFF>"Phase 1 defused. How about the next one?</span><span style=--0:#79B8FF>\n</span><span style=--0:#9ECBFF>"</span><span style=--0:#E1E4E8>);</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>32</div></div><div class=code>
</div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>33</div></div><div class=code><span class=indent><span style=--0:#99A0A6>    </span></span><span style=--0:#99A0A6>/* The second phase is harder.  No one will ever figure out</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>34</div></div><div class=code><span class=indent><span style=--0:#99A0A6>     </span></span><span style=--0:#99A0A6>* how to defuse this... */</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>35</div></div><div class=code><span class=indent><span style=--0:#E1E4E8>    </span></span><span style=--0:#E1E4E8>input </span><span style=--0:#F97583>=</span><span style=--0:#E1E4E8> </span><span style=--0:#B392F0>read_line</span><span style=--0:#E1E4E8>();</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>36</div></div><div class=code><span class=indent>    </span><span style=--0:#B392F0>phase_2</span><span style=--0:#E1E4E8>(input);</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>37</div></div><div class=code><span class=indent>    </span><span style=--0:#B392F0>phase_defused</span><span style=--0:#E1E4E8>();</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>38</div></div><div class=code><span class=indent>    </span><span style=--0:#B392F0>printf</span><span style=--0:#E1E4E8>(</span><span style=--0:#9ECBFF>"That's number 2.  Keep going!</span><span style=--0:#79B8FF>\n</span><span style=--0:#9ECBFF>"</span><span style=--0:#E1E4E8>);</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>39</div></div><div class=code>
</div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>40</div></div><div class=code><span class=indent><span style=--0:#99A0A6>    </span></span><span style=--0:#99A0A6>/* I guess this is too easy so far.  Some more complex code will</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>41</div></div><div class=code><span class=indent><span style=--0:#99A0A6>     </span></span><span style=--0:#99A0A6>* confuse people. */</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>42</div></div><div class=code><span class=indent><span style=--0:#E1E4E8>    </span></span><span style=--0:#E1E4E8>input </span><span style=--0:#F97583>=</span><span style=--0:#E1E4E8> </span><span style=--0:#B392F0>read_line</span><span style=--0:#E1E4E8>();</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>43</div></div><div class=code><span class=indent>    </span><span style=--0:#B392F0>phase_3</span><span style=--0:#E1E4E8>(input);</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>44</div></div><div class=code><span class=indent>    </span><span style=--0:#B392F0>phase_defused</span><span style=--0:#E1E4E8>();</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>45</div></div><div class=code><span class=indent>    </span><span style=--0:#B392F0>printf</span><span style=--0:#E1E4E8>(</span><span style=--0:#9ECBFF>"Halfway there!</span><span style=--0:#79B8FF>\n</span><span style=--0:#9ECBFF>"</span><span style=--0:#E1E4E8>);</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>46</div></div><div class=code>
</div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>47</div></div><div class=code><span class=indent><span style=--0:#99A0A6>    </span></span><span style=--0:#99A0A6>/* Oh yeah?  Well, how good is your math?  Try on this saucy problem! */</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>48</div></div><div class=code><span class=indent><span style=--0:#E1E4E8>    </span></span><span style=--0:#E1E4E8>input </span><span style=--0:#F97583>=</span><span style=--0:#E1E4E8> </span><span style=--0:#B392F0>read_line</span><span style=--0:#E1E4E8>();</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>49</div></div><div class=code><span class=indent>    </span><span style=--0:#B392F0>phase_4</span><span style=--0:#E1E4E8>(input);</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>50</div></div><div class=code><span class=indent>    </span><span style=--0:#B392F0>phase_defused</span><span style=--0:#E1E4E8>();</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>51</div></div><div class=code><span class=indent>    </span><span style=--0:#B392F0>printf</span><span style=--0:#E1E4E8>(</span><span style=--0:#9ECBFF>"So you got that one.  Try this one.</span><span style=--0:#79B8FF>\n</span><span style=--0:#9ECBFF>"</span><span style=--0:#E1E4E8>);</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>52</div></div><div class=code><span class=indent><span style=--0:#99A0A6>        </span></span><span style=--0:#99A0A6>/* Round and 'round in memory we go, where we stop, the bomb blows! */</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>53</div></div><div class=code><span class=indent><span style=--0:#E1E4E8>    </span></span><span style=--0:#E1E4E8>input </span><span style=--0:#F97583>=</span><span style=--0:#E1E4E8> </span><span style=--0:#B392F0>read_line</span><span style=--0:#E1E4E8>();</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>54</div></div><div class=code><span class=indent>    </span><span style=--0:#B392F0>phase_5</span><span style=--0:#E1E4E8>(input);</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>55</div></div><div class=code><span class=indent>    </span><span style=--0:#B392F0>phase_defused</span><span style=--0:#E1E4E8>();</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>56</div></div><div class=code><span class=indent>    </span><span style=--0:#B392F0>printf</span><span style=--0:#E1E4E8>(</span><span style=--0:#9ECBFF>"Good work!  On to the next...</span><span style=--0:#79B8FF>\n</span><span style=--0:#9ECBFF>"</span><span style=--0:#E1E4E8>);</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>57</div></div><div class=code>
</div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>58</div></div><div class=code><span class=indent><span style=--0:#99A0A6>    </span></span><span style=--0:#99A0A6>/* This phase will never be used, since no one will get past the</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>59</div></div><div class=code><span class=indent><span style=--0:#99A0A6>     </span></span><span style=--0:#99A0A6>* earlier ones.  But just in case, make this one extra hard. */</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>60</div></div><div class=code><span class=indent><span style=--0:#E1E4E8>    </span></span><span style=--0:#E1E4E8>input </span><span style=--0:#F97583>=</span><span style=--0:#E1E4E8> </span><span style=--0:#B392F0>read_line</span><span style=--0:#E1E4E8>();</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>61</div></div><div class=code><span class=indent>    </span><span style=--0:#B392F0>phase_6</span><span style=--0:#E1E4E8>(input);</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>62</div></div><div class=code><span class=indent>    </span><span style=--0:#B392F0>phase_defused</span><span style=--0:#E1E4E8>();</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>63</div></div><div class=code>
</div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>64</div></div><div class=code><span class=indent><span style=--0:#99A0A6>    </span></span><span style=--0:#99A0A6>/* Wow, they got it!  But isn't something... missing?  Perhaps</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>65</div></div><div class=code><span class=indent><span style=--0:#99A0A6>     </span></span><span style=--0:#99A0A6>* something they overlooked?  Mua ha ha ha ha! */</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>66</div></div><div class=code><span class=indent>        </span><span style=--0:#F97583>return</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0</span><span style=--0:#E1E4E8>;</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="#include <stdio.h>#include <stdlib.h>#include &#x22;support.h&#x22;#include &#x22;phases.h&#x22;/*  * Note to self: Remember to erase this file so my victims will have no * idea what is going on, and so they will all blow up in a * spectaculary fiendish explosion. -- Dr. Evil  */FILE *infile;int main(int argc, char *argv[]){    char *input;    // 这里略去输入重定向的处理.../* Do all sorts of secret stuff that makes the bomb harder to defuse. */    initialize_bomb();    printf(&#x22;Welcome to my fiendish little bomb. You have 6 phases with\n&#x22;);    printf(&#x22;which to blow yourself up. Have a nice day!\n&#x22;);    /* Hmm...  Six phases must be more secure than one phase! */    input = read_line();             /* Get input                   */    phase_1(input);                  /* Run the phase               */    phase_defused();                 /* Drat!  They figured it out!                      * Let me know how they did it. */    printf(&#x22;Phase 1 defused. How about the next one?\n&#x22;);    /* The second phase is harder.  No one will ever figure out     * how to defuse this... */    input = read_line();    phase_2(input);    phase_defused();    printf(&#x22;That&#x27;s number 2.  Keep going!\n&#x22;);    /* I guess this is too easy so far.  Some more complex code will     * confuse people. */    input = read_line();    phase_3(input);    phase_defused();    printf(&#x22;Halfway there!\n&#x22;);    /* Oh yeah?  Well, how good is your math?  Try on this saucy problem! */    input = read_line();    phase_4(input);    phase_defused();    printf(&#x22;So you got that one.  Try this one.\n&#x22;);        /* Round and &#x27;round in memory we go, where we stop, the bomb blows! */    input = read_line();    phase_5(input);    phase_defused();    printf(&#x22;Good work!  On to the next...\n&#x22;);    /* This phase will never be used, since no one will get past the     * earlier ones.  But just in case, make this one extra hard. */    input = read_line();    phase_6(input);    phase_defused();    /* Wow, they got it!  But isn&#x27;t something... missing?  Perhaps     * something they overlooked?  Mua ha ha ha ha! */        return 0;" data-copied=Copied!><div></div></button></div></figure></div><p>显然,解谜要点隐藏在<code>phase_1</code>, <code>phase_2</code>,…, <code>phase_6</code>中</p><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>bomb</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="gdb bomb" data-copied=Copied!><div></div></button></div></figure></div><p>设置断点,阻止炸弹爆炸:</p><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>b</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>explode_bomb</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="(gdb) b explode_bomb" data-copied=Copied!><div></div></button></div></figure></div><p>这是explode_bomb代码,不再深究:</p><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>disassemble</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>explode_bomb</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span style=--0:#B392F0>Dump</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>of</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>assembler</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>code</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>for</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>function</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>explode_bomb:</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>3</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040143a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+0>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>sub</span><span style=--0:#E1E4E8>    $0x8</span><span style=--0:#9ECBFF>,%rsp</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>4</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040143e</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+4>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x4025a3</span><span style=--0:#9ECBFF>,%edi</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>5</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401443</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+9>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x400b10</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;puts@plt></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>6</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401448</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+14>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x4025ac</span><span style=--0:#9ECBFF>,%edi</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>7</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040144d</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+19>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x400b10</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;puts@plt></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>8</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401452</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+24>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x8</span><span style=--0:#9ECBFF>,%edi</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>9</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401457</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+29>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x400c20</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;exit@plt></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>10</div></div><div class=code><span style=--0:#B392F0>End</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>of</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>assembler</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>dump.</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="(gdb) disassemble explode_bombDump of assembler code for function explode_bomb:   0x000000000040143a <+0>:     sub    $0x8,%rsp   0x000000000040143e <+4>:     mov    $0x4025a3,%edi   0x0000000000401443 <+9>:     call   0x400b10 <puts@plt>   0x0000000000401448 <+14>:    mov    $0x4025ac,%edi   0x000000000040144d <+19>:    call   0x400b10 <puts@plt>   0x0000000000401452 <+24>:    mov    $0x8,%edi   0x0000000000401457 <+29>:    call   0x400c20 <exit@plt>End of assembler dump." data-copied=Copied!><div></div></button></div></figure></div><p>运行程序:</p><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>)</span><span style=--0:#B392F0>r</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code=(gdb)r data-copied=Copied!><div></div></button></div></figure></div><h1 id=phase_1>phase_1</h1><p>在gdb中使用反汇编工具</p><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>)</span><span style=--0:#B392F0>disasemble</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>phase_1</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="(gdb)disasemble phase_1" data-copied=Copied!><div></div></button></div></figure></div><p>得到反汇编结果:</p><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#B392F0>Dump</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>of</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>assembler</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>code</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>for</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>function</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>phase_1:</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400ee0</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+0>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>sub</span><span style=--0:#E1E4E8>    $0x8</span><span style=--0:#9ECBFF>,%rsp</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>3</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400ee4</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+4>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x402400</span><span style=--0:#9ECBFF>,%esi</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>4</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400ee9</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+9>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x401338</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;strings_not_equal></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>5</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400eee</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+14>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>test</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>%eax,%eax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>6</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400ef0</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+16>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>je</span><span style=--0:#E1E4E8>     </span><span style=--0:#79B8FF>0x400ef7</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_1+23></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>7</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400ef2</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+18>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x40143a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;explode_bomb></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>8</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400ef7</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+23>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>add</span><span style=--0:#E1E4E8>    $0x8</span><span style=--0:#9ECBFF>,%rsp</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>9</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400efb</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+27>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>ret</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>10</div></div><div class=code><span style=--0:#B392F0>End</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>of</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>assembler</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>dump.</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="Dump of assembler code for function phase_1:   0x00400ee0 <+0>:     sub    $0x8,%rsp   0x00400ee4 <+4>:     mov    $0x402400,%esi   0x00400ee9 <+9>:     call   0x401338 <strings_not_equal>   0x00400eee <+14>:    test   %eax,%eax   0x00400ef0 <+16>:    je     0x400ef7 <phase_1+23>   0x00400ef2 <+18>:    call   0x40143a <explode_bomb>   0x00400ef7 <+23>:    add    $0x8,%rsp   0x00400efb <+27>:    retEnd of assembler dump." data-copied=Copied!><div></div></button></div></figure></div><p>注意到 <code>test %eax, %eax</code>,当%eax=0的时候会执行 <code>je</code>,跳过explor_bomb函数,解开炸弹 %esi的值是0x00402400(32bits) 看到有一个&#x3C;strings_not_equal>函数,继续</p><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>disassemble</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>strings_not_equal</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="(gdb) disassemble strings_not_equal" data-copied=Copied!><div></div></button></div></figure></div><p>得到</p><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#B392F0>Dump</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>of</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>assembler</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>code</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>for</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>function</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>strings_not_equal:</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00401338</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+0>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>push</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>%r12</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>3</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0040133a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+2>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>push</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>%rbp</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>4</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0040133b</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+3>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>push</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>%rbx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>5</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0040133c</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+4>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%rdi,%rbx</span><span style=--0:#E1E4E8>                         </span><span style=--0:#99A0A6># %rdi是存放input指针,先复制到%rbx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>6</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0040133f</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+7>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%rsi,%rbp</span><span style=--0:#E1E4E8>                         </span><span style=--0:#99A0A6># %rbp复制为0x402400</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>7</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00401342</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+10>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x40131b</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;string_length></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>8</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00401347</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+15>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%eax,%r12d</span><span style=--0:#E1E4E8>                        </span><span style=--0:#99A0A6># input字符串的长度存放到%r12d</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>9</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0040134a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+18>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%rbp,%rdi</span><span style=--0:#E1E4E8>                         </span><span style=--0:#99A0A6># 把%rbp赋值给函数参数%rdi</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>10</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0040134d</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+21>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x40131b</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;string_length></span><span style=--0:#E1E4E8>          </span><span style=--0:#99A0A6># 返回%rdi的长度</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>11</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00401352</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+26>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x1</span><span style=--0:#9ECBFF>,%edx</span><span style=--0:#E1E4E8>                         </span><span style=--0:#99A0A6># %edx赋值为1</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>12</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00401357</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+31>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>cmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%eax,%r12d</span><span style=--0:#E1E4E8>                        </span><span style=--0:#99A0A6># 0x402400字符串的长度与input字符串长度相比较</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>13</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0040135a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+34>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jne</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x40139b</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;strings_not_equal+99></span><span style=--0:#E1E4E8>   </span><span style=--0:#99A0A6># 必须相等,否则函数将返回1</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>14</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0040135c</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+36>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>movzbl</span><span style=--0:#E1E4E8> (%rbx),%eax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>15</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0040135f</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+39>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>test</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>%al,%al</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>16</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00401361</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+41>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>je</span><span style=--0:#E1E4E8>     </span><span style=--0:#79B8FF>0x401388</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;strings_not_equal+80></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>17</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00401363</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+43>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>cmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x0</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rbp</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%al</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>18</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00401366</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+46>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>je</span><span style=--0:#E1E4E8>     </span><span style=--0:#79B8FF>0x401372</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;strings_not_equal+58></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>19</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00401368</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+48>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x40138f</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;strings_not_equal+87></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>20</div></div><div class=code><span style=--0:#B392F0>--Type</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;RET></span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>for</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>more,</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>q</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>to</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>quit,</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>c</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>to</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>continue</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>without</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>paging--c</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>21</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0040136a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+50>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>cmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x0</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rbp</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%al</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>22</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0040136d</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+53>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>nopl</span><span style=--0:#E1E4E8>   (%rax)</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>23</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00401370</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+56>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jne</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x401396</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;strings_not_equal+94></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>24</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00401372</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+58>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>add</span><span style=--0:#E1E4E8>    $0x1</span><span style=--0:#9ECBFF>,%rbx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>25</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00401376</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+62>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>add</span><span style=--0:#E1E4E8>    $0x1</span><span style=--0:#9ECBFF>,%rbp</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>26</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0040137a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+66>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>movzbl</span><span style=--0:#E1E4E8> (%rbx),%eax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>27</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0040137d</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+69>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>test</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>%al,%al</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>28</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0040137f</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+71>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jne</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x40136a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;strings_not_equal+50></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>29</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00401381</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+73>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x0</span><span style=--0:#9ECBFF>,%edx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>30</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00401386</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+78>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x40139b</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;strings_not_equal+99></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>31</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00401388</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+80>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x0</span><span style=--0:#9ECBFF>,%edx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>32</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0040138d</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+85>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x40139b</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;strings_not_equal+99></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>33</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0040138f</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+87>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x1</span><span style=--0:#9ECBFF>,%edx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>34</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00401394</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+92>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x40139b</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;strings_not_equal+99></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>35</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00401396</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+94>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x1</span><span style=--0:#9ECBFF>,%edx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>36</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0040139b</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+99>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%edx,%eax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>37</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0040139d</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+101>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>pop</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%rbx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>38</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0040139e</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+102>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>pop</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%rbp</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>39</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0040139f</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+103>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>pop</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%r12</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>40</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x004013a1</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+105>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>ret</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>41</div></div><div class=code><span style=--0:#B392F0>End</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>of</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>assembler</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>dump.</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="Dump of assembler code for function strings_not_equal:   0x00401338 <+0>:     push   %r12   0x0040133a <+2>:     push   %rbp   0x0040133b <+3>:     push   %rbx   0x0040133c <+4>:     mov    %rdi,%rbx                         # %rdi是存放input指针,先复制到%rbx   0x0040133f <+7>:     mov    %rsi,%rbp                         # %rbp复制为0x402400   0x00401342 <+10>:    call   0x40131b <string_length>   0x00401347 <+15>:    mov    %eax,%r12d                        # input字符串的长度存放到%r12d   0x0040134a <+18>:    mov    %rbp,%rdi                         # 把%rbp赋值给函数参数%rdi   0x0040134d <+21>:    call   0x40131b <string_length>          # 返回%rdi的长度   0x00401352 <+26>:    mov    $0x1,%edx                         # %edx赋值为1   0x00401357 <+31>:    cmp    %eax,%r12d                        # 0x402400字符串的长度与input字符串长度相比较   0x0040135a <+34>:    jne    0x40139b <strings_not_equal+99>   # 必须相等,否则函数将返回1   0x0040135c <+36>:    movzbl (%rbx),%eax   0x0040135f <+39>:    test   %al,%al   0x00401361 <+41>:    je     0x401388 <strings_not_equal+80>   0x00401363 <+43>:    cmp    0x0(%rbp),%al   0x00401366 <+46>:    je     0x401372 <strings_not_equal+58>   0x00401368 <+48>:    jmp    0x40138f <strings_not_equal+87>--Type <RET> for more, q to quit, c to continue without paging--c   0x0040136a <+50>:    cmp    0x0(%rbp),%al   0x0040136d <+53>:    nopl   (%rax)   0x00401370 <+56>:    jne    0x401396 <strings_not_equal+94>   0x00401372 <+58>:    add    $0x1,%rbx   0x00401376 <+62>:    add    $0x1,%rbp   0x0040137a <+66>:    movzbl (%rbx),%eax   0x0040137d <+69>:    test   %al,%al   0x0040137f <+71>:    jne    0x40136a <strings_not_equal+50>   0x00401381 <+73>:    mov    $0x0,%edx   0x00401386 <+78>:    jmp    0x40139b <strings_not_equal+99>   0x00401388 <+80>:    mov    $0x0,%edx   0x0040138d <+85>:    jmp    0x40139b <strings_not_equal+99>   0x0040138f <+87>:    mov    $0x1,%edx   0x00401394 <+92>:    jmp    0x40139b <strings_not_equal+99>   0x00401396 <+94>:    mov    $0x1,%edx   0x0040139b <+99>:    mov    %edx,%eax   0x0040139d <+101>:   pop    %rbx   0x0040139e <+102>:   pop    %rbp   0x0040139f <+103>:   pop    %r12   0x004013a1 <+105>:   retEnd of assembler dump." data-copied=Copied!><div></div></button></div></figure></div><p>看到有一个&#x3C;string_length>函数,继续</p><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>disassemble</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>string_length</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="(gdb) disassemble string_length" data-copied=Copied!><div></div></button></div></figure></div><p>得到</p><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#B392F0>Dump</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>of</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>assembler</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>code</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>for</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>function</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>string_length:</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0040131b</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+0>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>cmpb</span><span style=--0:#E1E4E8>   $0x0</span><span style=--0:#9ECBFF>,</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rdi</span><span style=--0:#E1E4E8>)</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>3</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0040131e</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+3>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>je</span><span style=--0:#E1E4E8>     </span><span style=--0:#79B8FF>0x401332</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;string_length+23></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>4</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00401320</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+5>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%rdi,%rdx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>5</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00401323</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+8>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>add</span><span style=--0:#E1E4E8>    $0x1</span><span style=--0:#9ECBFF>,%rdx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>6</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00401327</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+12>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%edx,%eax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>7</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00401329</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+14>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>sub</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%edi,%eax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>8</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0040132b</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+16>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>cmpb</span><span style=--0:#E1E4E8>   $0x0</span><span style=--0:#9ECBFF>,</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rdx</span><span style=--0:#E1E4E8>)</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>9</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0040132e</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+19>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jne</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x401323</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;string_length+8></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>10</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00401330</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+21>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>repz</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>ret</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>11</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00401332</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+23>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x0</span><span style=--0:#9ECBFF>,%eax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>12</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00401337</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+28>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>ret</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>13</div></div><div class=code><span style=--0:#B392F0>End</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>of</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>assembler</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>dump.</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="Dump of assembler code for function string_length:   0x0040131b <+0>:     cmpb   $0x0,(%rdi)   0x0040131e <+3>:     je     0x401332 <string_length+23>   0x00401320 <+5>:     mov    %rdi,%rdx   0x00401323 <+8>:     add    $0x1,%rdx   0x00401327 <+12>:    mov    %edx,%eax   0x00401329 <+14>:    sub    %edi,%eax   0x0040132b <+16>:    cmpb   $0x0,(%rdx)   0x0040132e <+19>:    jne    0x401323 <string_length+8>   0x00401330 <+21>:    repz ret   0x00401332 <+23>:    mov    $0x0,%eax   0x00401337 <+28>:    retEnd of assembler dump." data-copied=Copied!><div></div></button></div></figure></div><p>这是一个简单的函数,返回%rdi指向的字符串的长度到%eax 一步一步看下来,感觉是逐个比较输入字符串与0x402400字符串,相同就拆除了炸弹.</p><div class=expressive-code><figure class=frame><figcaption class=header></figcaption><pre data-language=gdb><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#e1e4e8>(gdb) x /s 0x402400</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span style=--0:#e1e4e8>0x402400:       "Border relations with Canada have never been better."</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="(gdb) x /s 0x4024000x402400:       &#x22;Border relations with Canada have never been better.&#x22;" data-copied=Copied!><div></div></button></div></figure></div><p>就可以显示该地址对应的字符串. 拆开第一个炸弹的结果:</p><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>r</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span style=--0:#B392F0>Starting</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>program:</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/mnt/e/Documents/C/CSAPP/bomb/bomb</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>3</div></div><div class=code><span style=--0:#E1E4E8>[Thread debugging using libthread_db enabled]</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>4</div></div><div class=code><span style=--0:#B392F0>Using</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>host</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>libthread_db</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>library</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>"/lib/x86_64-linux-gnu/libthread_db.so.1".</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>5</div></div><div class=code><span style=--0:#B392F0>Welcome</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>to</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>my</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>fiendish</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>little</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>bomb.</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>You</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>have</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>6</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>phases</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>with</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>6</div></div><div class=code><span style=--0:#79B8FF>which</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>to</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>blow</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>yourself</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>up.</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>Have</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>nice</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>day!</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>7</div></div><div class=code><span style=--0:#B392F0>Border</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>relations</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>with</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>Canada</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>have</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>never</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>been</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>better.</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>8</div></div><div class=code><span style=--0:#B392F0>Phase</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>1</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>defused.</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>How</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>about</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>the</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>next</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>one?</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="(gdb) rStarting program: /mnt/e/Documents/C/CSAPP/bomb/bomb[Thread debugging using libthread_db enabled]Using host libthread_db library &#x22;/lib/x86_64-linux-gnu/libthread_db.so.1&#x22;.Welcome to my fiendish little bomb. You have 6 phases withwhich to blow yourself up. Have a nice day!Border relations with Canada have never been better.Phase 1 defused. How about the next one?" data-copied=Copied!><div></div></button></div></figure></div><h1 id=phase_2>phase_2</h1><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>disassemble</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>phase_2</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span style=--0:#B392F0>Dump</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>of</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>assembler</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>code</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>for</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>function</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>phase_2:</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>3</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400efc</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+0>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>push</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>%rbp</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>4</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400efd</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+1>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>push</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>%rbx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>5</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400efe</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+2>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>sub</span><span style=--0:#E1E4E8>    $0x28</span><span style=--0:#9ECBFF>,%rsp</span><span style=--0:#E1E4E8>                      </span><span style=--0:#99A0A6># 栈顶指针减去0x28(40)</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>6</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400f02</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+6>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%rsp,%rsi</span><span style=--0:#E1E4E8>                       </span><span style=--0:#99A0A6># 此时复制给%rsi</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>7</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400f05</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+9>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x40145c</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;read_six_numbers></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>8</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400f0a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+14>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>cmpl</span><span style=--0:#E1E4E8>   $0x1</span><span style=--0:#9ECBFF>,</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsp</span><span style=--0:#E1E4E8>)                     </span><span style=--0:#99A0A6># %rsp指向的内存的值应该是0x1</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>9</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400f0e</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+18>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>je</span><span style=--0:#E1E4E8>     </span><span style=--0:#79B8FF>0x400f30</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_2+52></span><span style=--0:#E1E4E8>           </span><span style=--0:#99A0A6># 去52看看</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>10</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400f10</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+20>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x40143a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;explode_bomb></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>11</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400f15</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+25>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x400f30</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_2+52></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>12</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400f17</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+27>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>-0x4(%rbx</span><span style=--0:#E1E4E8>),%eax                 </span><span style=--0:#99A0A6># %rbx-4=%rsp,%rsp指向的内存的值赋值给%eax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>13</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400f1a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+30>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>add</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%eax,%eax</span><span style=--0:#E1E4E8>                       </span><span style=--0:#99A0A6># %eax的值乘以2</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>14</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400f1c</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+32>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>cmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%eax,</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rbx</span><span style=--0:#E1E4E8>)                     </span><span style=--0:#99A0A6># 比较%eax和%rbx=%rcx指向的内存的值</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>15</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400f1e</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+34>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>je</span><span style=--0:#E1E4E8>     </span><span style=--0:#79B8FF>0x400f25</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_2+41></span><span style=--0:#E1E4E8>           </span><span style=--0:#99A0A6># 必须相等,去41看看</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>16</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400f20</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+36>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x40143a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;explode_bomb></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>17</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400f25</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+41>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>add</span><span style=--0:#E1E4E8>    $0x4</span><span style=--0:#9ECBFF>,%rbx</span><span style=--0:#E1E4E8>                       </span><span style=--0:#99A0A6># %rbx=%rbx+4=%r8</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>18</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400f29</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+45>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>cmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%rbp,%rbx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>19</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400f2c</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+48>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jne</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x400f17</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_2+27></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>20</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400f2e</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+50>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x400f3c</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_2+64></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>21</div></div><div class=code><span style=--0:#B392F0>--Type</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;RET></span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>for</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>more,</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>q</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>to</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>quit,</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>c</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>to</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>continue</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>without</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>paging--c</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>22</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400f30</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+52>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>lea</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x4</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsp</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%rbx</span><span style=--0:#E1E4E8>                </span><span style=--0:#99A0A6># 此时%rcx=%rbx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>23</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400f35</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+57>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>lea</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x18</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsp</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%rbp</span><span style=--0:#E1E4E8>               </span><span style=--0:#99A0A6># 底部加上24的地址记为%rbp</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>24</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400f3a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+62>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x400f17</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_2+27></span><span style=--0:#E1E4E8>         </span><span style=--0:#99A0A6># 去27看看</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>25</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400f3c</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+64>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>add</span><span style=--0:#E1E4E8>    $0x28</span><span style=--0:#9ECBFF>,%rsp</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>26</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400f40</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+68>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>pop</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%rbx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>27</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400f41</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+69>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>pop</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%rbp</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>28</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00400f42</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+70>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>ret</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>29</div></div><div class=code><span style=--0:#B392F0>End</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>of</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>assembler</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>dump.</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="(gdb) disassemble phase_2Dump of assembler code for function phase_2:   0x00400efc <+0>:     push   %rbp   0x00400efd <+1>:     push   %rbx   0x00400efe <+2>:     sub    $0x28,%rsp                      # 栈顶指针减去0x28(40)   0x00400f02 <+6>:     mov    %rsp,%rsi                       # 此时复制给%rsi   0x00400f05 <+9>:     call   0x40145c <read_six_numbers>   0x00400f0a <+14>:    cmpl   $0x1,(%rsp)                     # %rsp指向的内存的值应该是0x1   0x00400f0e <+18>:    je     0x400f30 <phase_2+52>           # 去52看看   0x00400f10 <+20>:    call   0x40143a <explode_bomb>   0x00400f15 <+25>:    jmp    0x400f30 <phase_2+52>   0x00400f17 <+27>:    mov    -0x4(%rbx),%eax                 # %rbx-4=%rsp,%rsp指向的内存的值赋值给%eax   0x00400f1a <+30>:    add    %eax,%eax                       # %eax的值乘以2   0x00400f1c <+32>:    cmp    %eax,(%rbx)                     # 比较%eax和%rbx=%rcx指向的内存的值   0x00400f1e <+34>:    je     0x400f25 <phase_2+41>           # 必须相等,去41看看   0x00400f20 <+36>:    call   0x40143a <explode_bomb>   0x00400f25 <+41>:    add    $0x4,%rbx                       # %rbx=%rbx+4=%r8   0x00400f29 <+45>:    cmp    %rbp,%rbx   0x00400f2c <+48>:    jne    0x400f17 <phase_2+27>   0x00400f2e <+50>:    jmp    0x400f3c <phase_2+64>--Type <RET> for more, q to quit, c to continue without paging--c   0x00400f30 <+52>:    lea    0x4(%rsp),%rbx                # 此时%rcx=%rbx   0x00400f35 <+57>:    lea    0x18(%rsp),%rbp               # 底部加上24的地址记为%rbp   0x00400f3a <+62>:    jmp    0x400f17 <phase_2+27>         # 去27看看   0x00400f3c <+64>:    add    $0x28,%rsp   0x00400f40 <+68>:    pop    %rbx   0x00400f41 <+69>:    pop    %rbp   0x00400f42 <+70>:    retEnd of assembler dump." data-copied=Copied!><div></div></button></div></figure></div><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>disassemble</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>read_six_numbers</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span style=--0:#B392F0>Dump</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>of</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>assembler</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>code</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>for</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>function</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>read_six_numbers:</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>3</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040145c</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+0>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>sub</span><span style=--0:#E1E4E8>    $0x18</span><span style=--0:#9ECBFF>,%rsp</span><span style=--0:#E1E4E8>                </span><span style=--0:#99A0A6># 栈顶指针再减去0x18(24)</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>4</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401460</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+4>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%rsi,%rdx</span><span style=--0:#E1E4E8>                 </span><span style=--0:#99A0A6># 底部是%rsp,顶部是%rsi,复制给%rdx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>5</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401463</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+7>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>lea</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x4</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsi</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%rcx</span><span style=--0:#E1E4E8>            </span><span style=--0:#99A0A6># 顶部加上4的地址记为%rcx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>6</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401467</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+11>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>lea</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x14</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsi</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%rax</span><span style=--0:#E1E4E8>           </span><span style=--0:#99A0A6># 顶部加上20的地址记为%rax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>7</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040146b</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+15>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%rax,0x8</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsp</span><span style=--0:#E1E4E8>)            </span><span style=--0:#99A0A6># %rsp+8那块内存保存了%rax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>8</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401470</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+20>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>lea</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x10</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsi</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%rax</span><span style=--0:#E1E4E8>           </span><span style=--0:#99A0A6># 顶部加上16的地址记为%rax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>9</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401474</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+24>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%rax,</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsp</span><span style=--0:#E1E4E8>)               </span><span style=--0:#99A0A6># 底部那块内存保存了%rax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>10</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401478</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+28>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>lea</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0xc</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsi</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%r9</span><span style=--0:#E1E4E8>             </span><span style=--0:#99A0A6># 顶部加上12的地址记为%r9</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>11</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040147c</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+32>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>lea</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x8</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsi</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%r8</span><span style=--0:#E1E4E8>             </span><span style=--0:#99A0A6># 顶部加上8的地址记为%r8</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>12</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401480</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+36>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x4025c3</span><span style=--0:#9ECBFF>,%esi</span><span style=--0:#E1E4E8>            </span><span style=--0:#99A0A6># %esi赋值为0x4025c3,我们可以打印这个内存地址的内容</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>13</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401485</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+41>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x0</span><span style=--0:#9ECBFF>,%eax</span><span style=--0:#E1E4E8>                 </span><span style=--0:#99A0A6># %eax赋值为0</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>14</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040148a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+46>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x400bf0</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;__isoc99_sscanf@plt></span><span style=--0:#E1E4E8>  </span><span style=--0:#99A0A6># 我说怎么没用到%rdi呢,原来在这里处理输入</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>15</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040148f</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+51>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>cmp</span><span style=--0:#E1E4E8>    $0x5</span><span style=--0:#9ECBFF>,%eax</span><span style=--0:#E1E4E8>                 </span><span style=--0:#99A0A6># sscanf函数的返回值与5相比较</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>16</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401492</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+54>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jg</span><span style=--0:#E1E4E8>     </span><span style=--0:#79B8FF>0x401499</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;read_six_numbers+61></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>17</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401494</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+56>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x40143a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;explode_bomb></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>18</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401499</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+61>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>add</span><span style=--0:#E1E4E8>    $0x18</span><span style=--0:#9ECBFF>,%rsp</span><span style=--0:#E1E4E8>                </span><span style=--0:#99A0A6># 如果大于5,栈底回到栈顶</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>19</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040149d</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+65>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>ret</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>20</div></div><div class=code><span style=--0:#B392F0>End</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>of</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>assembler</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>dump.</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="(gdb) disassemble read_six_numbersDump of assembler code for function read_six_numbers:   0x000000000040145c <+0>:     sub    $0x18,%rsp                # 栈顶指针再减去0x18(24)   0x0000000000401460 <+4>:     mov    %rsi,%rdx                 # 底部是%rsp,顶部是%rsi,复制给%rdx   0x0000000000401463 <+7>:     lea    0x4(%rsi),%rcx            # 顶部加上4的地址记为%rcx   0x0000000000401467 <+11>:    lea    0x14(%rsi),%rax           # 顶部加上20的地址记为%rax   0x000000000040146b <+15>:    mov    %rax,0x8(%rsp)            # %rsp+8那块内存保存了%rax   0x0000000000401470 <+20>:    lea    0x10(%rsi),%rax           # 顶部加上16的地址记为%rax   0x0000000000401474 <+24>:    mov    %rax,(%rsp)               # 底部那块内存保存了%rax   0x0000000000401478 <+28>:    lea    0xc(%rsi),%r9             # 顶部加上12的地址记为%r9   0x000000000040147c <+32>:    lea    0x8(%rsi),%r8             # 顶部加上8的地址记为%r8   0x0000000000401480 <+36>:    mov    $0x4025c3,%esi            # %esi赋值为0x4025c3,我们可以打印这个内存地址的内容   0x0000000000401485 <+41>:    mov    $0x0,%eax                 # %eax赋值为0   0x000000000040148a <+46>:    call   0x400bf0 <__isoc99_sscanf@plt>  # 我说怎么没用到%rdi呢,原来在这里处理输入   0x000000000040148f <+51>:    cmp    $0x5,%eax                 # sscanf函数的返回值与5相比较   0x0000000000401492 <+54>:    jg     0x401499 <read_six_numbers+61>   0x0000000000401494 <+56>:    call   0x40143a <explode_bomb>   0x0000000000401499 <+61>:    add    $0x18,%rsp                # 如果大于5,栈底回到栈顶   0x000000000040149d <+65>:    retEnd of assembler dump." data-copied=Copied!><div></div></button></div></figure></div><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>x</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/s</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0x4025c3</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span style=--0:#B392F0>0x4025c3:</span><span style=--0:#E1E4E8>       </span><span style=--0:#9ECBFF>"%d %d %d %d %d %d"</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="(gdb) x /s 0x4025c30x4025c3:       &#x22;%d %d %d %d %d %d&#x22;" data-copied=Copied!><div></div></button></div></figure></div><p>到这里就清晰了,答案应该是6个整数,以空格隔开: <code>1 2 4 8 16 32</code> 为了避免每次拆炸弹时都要输入一遍之前的答案,bomb.c中告诉我可以带参数运行,能打开文件读取内容.我把这个文件命名为answer</p><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>r</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>answer</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span style=--0:#B392F0>Starting</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>program:</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/mnt/e/Documents/C/CSAPP/bomb/bomb</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>answer</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>3</div></div><div class=code><span style=--0:#E1E4E8>[Thread debugging using libthread_db enabled]</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>4</div></div><div class=code><span style=--0:#B392F0>Using</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>host</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>libthread_db</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>library</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>"/lib/x86_64-linux-gnu/libthread_db.so.1".</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>5</div></div><div class=code><span style=--0:#B392F0>Welcome</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>to</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>my</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>fiendish</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>little</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>bomb.</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>You</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>have</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>6</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>phases</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>with</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>6</div></div><div class=code><span style=--0:#79B8FF>which</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>to</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>blow</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>yourself</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>up.</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>Have</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>nice</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>day!</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>7</div></div><div class=code><span style=--0:#B392F0>Phase</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>1</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>defused.</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>How</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>about</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>the</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>next</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>one?</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>8</div></div><div class=code><span style=--0:#B392F0>That</span><span style=--0:#B392F0>'s number 2.  Keep going!</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="(gdb) r answerStarting program: /mnt/e/Documents/C/CSAPP/bomb/bomb answer[Thread debugging using libthread_db enabled]Using host libthread_db library &#x22;/lib/x86_64-linux-gnu/libthread_db.so.1&#x22;.Welcome to my fiendish little bomb. You have 6 phases withwhich to blow yourself up. Have a nice day!Phase 1 defused. How about the next one?That&#x27;s number 2.  Keep going!" data-copied=Copied!><div></div></button></div></figure></div><p>成功了!</p><h1 id=phase_3>phase_3</h1><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>disassemble</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>phase_3</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span style=--0:#B392F0>Dump</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>of</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>assembler</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>code</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>for</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>function</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>phase_3:</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>3</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400f43</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+0>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>sub</span><span style=--0:#E1E4E8>    $0x18</span><span style=--0:#9ECBFF>,%rsp</span><span style=--0:#E1E4E8>                       </span><span style=--0:#99A0A6># 栈顶指针减去24</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>4</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400f47</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+4>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>lea</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0xc</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsp</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%rcx</span><span style=--0:#E1E4E8>                   </span><span style=--0:#99A0A6># 栈底+12的地址记为%rcx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>5</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400f4c</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+9>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>lea</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x8</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsp</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%rdx</span><span style=--0:#E1E4E8>                   </span><span style=--0:#99A0A6># 栈底+8的地址记为%rdx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>6</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400f51</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+14>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x4025cf</span><span style=--0:#9ECBFF>,%esi</span><span style=--0:#E1E4E8>                   </span><span style=--0:#99A0A6># %esi赋值为0x4025cf</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>7</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400f56</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+19>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x0</span><span style=--0:#9ECBFF>,%eax</span><span style=--0:#E1E4E8>                        </span><span style=--0:#99A0A6># %eax赋值为0</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>8</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400f5b</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+24>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x400bf0</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;__isoc99_sscanf@plt></span><span style=--0:#E1E4E8>   </span><span style=--0:#99A0A6># 调用函数</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>9</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400f60</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+29>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>cmp</span><span style=--0:#E1E4E8>    $0x1</span><span style=--0:#9ECBFF>,%eax</span><span style=--0:#E1E4E8>                        </span><span style=--0:#99A0A6># 比较%eax(sscanf函数的返回值)与1</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>10</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400f63</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+32>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jg</span><span style=--0:#E1E4E8>     </span><span style=--0:#79B8FF>0x400f6a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_3+39></span><span style=--0:#E1E4E8>            </span><span style=--0:#99A0A6># %eax必须大于1,去39看看</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>11</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400f65</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+34>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x40143a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;explode_bomb></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>12</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400f6a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+39>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>cmpl</span><span style=--0:#E1E4E8>   $0x7</span><span style=--0:#9ECBFF>,0x8</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsp</span><span style=--0:#E1E4E8>)                   </span><span style=--0:#99A0A6># 比较%rsp+8与7</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>13</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400f6f</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+44>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>ja</span><span style=--0:#E1E4E8>     </span><span style=--0:#79B8FF>0x400fad</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_3+106></span><span style=--0:#E1E4E8>           </span><span style=--0:#99A0A6># 负数和大于7的情况:引爆炸弹</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>14</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400f71</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+46>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x8</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsp</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%eax</span><span style=--0:#E1E4E8>                   </span><span style=--0:#99A0A6># 大于0小于等于7的情况:把%rsp+8指向的内存的值赋值给%eax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>15</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400f75</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+50>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>*</span><span style=--0:#9ECBFF>0x402470</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>,%rax,8</span><span style=--0:#E1E4E8>)               </span><span style=--0:#99A0A6># 跳转到0x402470+%rax*8的地址指向的内存存储的地址处</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>16</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400f7c</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+57>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0xcf</span><span style=--0:#9ECBFF>,%eax</span><span style=--0:#E1E4E8>                       </span><span style=--0:#99A0A6># %rax = 0</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>17</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400f81</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+62>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x400fbe</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_3+123></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>18</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400f83</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+64>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x2c3</span><span style=--0:#9ECBFF>,%eax</span><span style=--0:#E1E4E8>                      </span><span style=--0:#99A0A6># %rax = 2</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>19</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400f88</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+69>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x400fbe</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_3+123></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>20</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400f8a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+71>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x100</span><span style=--0:#9ECBFF>,%eax</span><span style=--0:#E1E4E8>                      </span><span style=--0:#99A0A6># %rax = 3</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>21</div></div><div class=code><span style=--0:#B392F0>--Type</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;RET></span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>for</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>more,</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>q</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>to</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>quit,</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>c</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>to</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>continue</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>without</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>paging--c</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>22</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400f8f</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+76>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x400fbe</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_3+123></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>23</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400f91</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+78>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x185</span><span style=--0:#9ECBFF>,%eax</span><span style=--0:#E1E4E8>                      </span><span style=--0:#99A0A6># %rax = 4</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>24</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400f96</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+83>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x400fbe</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_3+123></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>25</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400f98</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+85>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0xce</span><span style=--0:#9ECBFF>,%eax</span><span style=--0:#E1E4E8>                       </span><span style=--0:#99A0A6># %rax = 5</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>26</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400f9d</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+90>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x400fbe</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_3+123></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>27</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400f9f</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+92>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x2aa</span><span style=--0:#9ECBFF>,%eax</span><span style=--0:#E1E4E8>                      </span><span style=--0:#99A0A6># %rax = 6</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>28</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400fa4</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+97>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x400fbe</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_3+123></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>29</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400fa6</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+99>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x147</span><span style=--0:#9ECBFF>,%eax</span><span style=--0:#E1E4E8>                      </span><span style=--0:#99A0A6># %rax = 7</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>30</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400fab</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+104>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>jmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x400fbe</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_3+123></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>31</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400fad</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+106>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x40143a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;explode_bomb></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>32</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400fb2</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+111>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x0</span><span style=--0:#9ECBFF>,%eax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>33</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400fb7</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+116>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>jmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x400fbe</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_3+123></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>34</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400fb9</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+118>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x137</span><span style=--0:#9ECBFF>,%eax</span><span style=--0:#E1E4E8>                      </span><span style=--0:#99A0A6># %rax = 1</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>35</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400fbe</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+123>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>cmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0xc</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsp</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%eax</span><span style=--0:#E1E4E8>                   </span><span style=--0:#99A0A6># 比较*(%rsp+12)与%eax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>36</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400fc2</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+127>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>je</span><span style=--0:#E1E4E8>     </span><span style=--0:#79B8FF>0x400fc9</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_3+134></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>37</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400fc4</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+129>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x40143a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;explode_bomb></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>38</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400fc9</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+134>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>add</span><span style=--0:#E1E4E8>    $0x18</span><span style=--0:#9ECBFF>,%rsp</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>39</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400fcd</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+138>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>ret</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>40</div></div><div class=code><span style=--0:#B392F0>End</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>of</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>assembler</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>dump.</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="(gdb) disassemble phase_3Dump of assembler code for function phase_3:   0x0000000000400f43 <+0>:     sub    $0x18,%rsp                       # 栈顶指针减去24   0x0000000000400f47 <+4>:     lea    0xc(%rsp),%rcx                   # 栈底+12的地址记为%rcx   0x0000000000400f4c <+9>:     lea    0x8(%rsp),%rdx                   # 栈底+8的地址记为%rdx   0x0000000000400f51 <+14>:    mov    $0x4025cf,%esi                   # %esi赋值为0x4025cf   0x0000000000400f56 <+19>:    mov    $0x0,%eax                        # %eax赋值为0   0x0000000000400f5b <+24>:    call   0x400bf0 <__isoc99_sscanf@plt>   # 调用函数   0x0000000000400f60 <+29>:    cmp    $0x1,%eax                        # 比较%eax(sscanf函数的返回值)与1   0x0000000000400f63 <+32>:    jg     0x400f6a <phase_3+39>            # %eax必须大于1,去39看看   0x0000000000400f65 <+34>:    call   0x40143a <explode_bomb>   0x0000000000400f6a <+39>:    cmpl   $0x7,0x8(%rsp)                   # 比较%rsp+8与7   0x0000000000400f6f <+44>:    ja     0x400fad <phase_3+106>           # 负数和大于7的情况:引爆炸弹   0x0000000000400f71 <+46>:    mov    0x8(%rsp),%eax                   # 大于0小于等于7的情况:把%rsp+8指向的内存的值赋值给%eax   0x0000000000400f75 <+50>:    jmp    *0x402470(,%rax,8)               # 跳转到0x402470+%rax*8的地址指向的内存存储的地址处   0x0000000000400f7c <+57>:    mov    $0xcf,%eax                       # %rax = 0   0x0000000000400f81 <+62>:    jmp    0x400fbe <phase_3+123>   0x0000000000400f83 <+64>:    mov    $0x2c3,%eax                      # %rax = 2   0x0000000000400f88 <+69>:    jmp    0x400fbe <phase_3+123>   0x0000000000400f8a <+71>:    mov    $0x100,%eax                      # %rax = 3--Type <RET> for more, q to quit, c to continue without paging--c   0x0000000000400f8f <+76>:    jmp    0x400fbe <phase_3+123>   0x0000000000400f91 <+78>:    mov    $0x185,%eax                      # %rax = 4   0x0000000000400f96 <+83>:    jmp    0x400fbe <phase_3+123>   0x0000000000400f98 <+85>:    mov    $0xce,%eax                       # %rax = 5   0x0000000000400f9d <+90>:    jmp    0x400fbe <phase_3+123>   0x0000000000400f9f <+92>:    mov    $0x2aa,%eax                      # %rax = 6   0x0000000000400fa4 <+97>:    jmp    0x400fbe <phase_3+123>   0x0000000000400fa6 <+99>:    mov    $0x147,%eax                      # %rax = 7   0x0000000000400fab <+104>:   jmp    0x400fbe <phase_3+123>   0x0000000000400fad <+106>:   call   0x40143a <explode_bomb>   0x0000000000400fb2 <+111>:   mov    $0x0,%eax   0x0000000000400fb7 <+116>:   jmp    0x400fbe <phase_3+123>   0x0000000000400fb9 <+118>:   mov    $0x137,%eax                      # %rax = 1   0x0000000000400fbe <+123>:   cmp    0xc(%rsp),%eax                   # 比较*(%rsp+12)与%eax   0x0000000000400fc2 <+127>:   je     0x400fc9 <phase_3+134>   0x0000000000400fc4 <+129>:   call   0x40143a <explode_bomb>   0x0000000000400fc9 <+134>:   add    $0x18,%rsp   0x0000000000400fcd <+138>:   retEnd of assembler dump." data-copied=Copied!><div></div></button></div></figure></div><p>我发现传入sscanf函数总是%esi</p><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>x</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/s</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0x4025cf</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span style=--0:#B392F0>0x4025cf:</span><span style=--0:#E1E4E8>       </span><span style=--0:#9ECBFF>"%d %d"</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="(gdb) x /s 0x4025cf0x4025cf:       &#x22;%d %d&#x22;" data-copied=Copied!><div></div></button></div></figure></div><p>对 <code>0x0000000000400f75 &#x3C;+50>: jmp *0x402470(,%rax,8)</code> 的理解至关重要.这正是一个跳转表,含义是跳转到0x402470+%rax*8这个地址对应内存的值(也是一个地址). 所以,我打印出0~7所有情况的%rax对应的64位地址:</p><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>x</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/8x</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0x402470</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span style=--0:#B392F0>0x402470:</span><span style=--0:#E1E4E8>       </span><span style=--0:#79B8FF>0x7c</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x0f</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x40</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>3</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>x</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/8x</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0x402478</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>4</div></div><div class=code><span style=--0:#B392F0>0x402478:</span><span style=--0:#E1E4E8>       </span><span style=--0:#79B8FF>0xb9</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x0f</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x40</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>5</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>x</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/8x</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0x402480</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>6</div></div><div class=code><span style=--0:#B392F0>0x402480:</span><span style=--0:#E1E4E8>       </span><span style=--0:#79B8FF>0x83</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x0f</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x40</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>7</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>x</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/8x</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0x402488</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>8</div></div><div class=code><span style=--0:#B392F0>0x402488:</span><span style=--0:#E1E4E8>       </span><span style=--0:#79B8FF>0x8a</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x0f</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x40</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>9</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>x</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/8x</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0x402490</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>10</div></div><div class=code><span style=--0:#B392F0>0x402490:</span><span style=--0:#E1E4E8>       </span><span style=--0:#79B8FF>0x91</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x0f</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x40</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>11</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>x</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/8x</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0x402498</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>12</div></div><div class=code><span style=--0:#B392F0>0x402498:</span><span style=--0:#E1E4E8>       </span><span style=--0:#79B8FF>0x98</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x0f</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x40</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>13</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>x</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/8x</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0x4024a0</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>14</div></div><div class=code><span style=--0:#B392F0>0x4024a0:</span><span style=--0:#E1E4E8>       </span><span style=--0:#79B8FF>0x9f</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x0f</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x40</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>15</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>x</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/8x</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0x4024a8</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>16</div></div><div class=code><span style=--0:#B392F0>0x4024a8:</span><span style=--0:#E1E4E8>       </span><span style=--0:#79B8FF>0xa6</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x0f</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x40</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>17</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>)</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="(gdb) x /8x 0x4024700x402470:       0x7c    0x0f    0x40    0x00    0x00    0x00    0x00    0x00(gdb) x /8x 0x4024780x402478:       0xb9    0x0f    0x40    0x00    0x00    0x00    0x00    0x00(gdb) x /8x 0x4024800x402480:       0x83    0x0f    0x40    0x00    0x00    0x00    0x00    0x00(gdb) x /8x 0x4024880x402488:       0x8a    0x0f    0x40    0x00    0x00    0x00    0x00    0x00(gdb) x /8x 0x4024900x402490:       0x91    0x0f    0x40    0x00    0x00    0x00    0x00    0x00(gdb) x /8x 0x4024980x402498:       0x98    0x0f    0x40    0x00    0x00    0x00    0x00    0x00(gdb) x /8x 0x4024a00x4024a0:       0x9f    0x0f    0x40    0x00    0x00    0x00    0x00    0x00(gdb) x /8x 0x4024a80x4024a8:       0xa6    0x0f    0x40    0x00    0x00    0x00    0x00    0x00(gdb)" data-copied=Copied!><div></div></button></div></figure></div><p>我已经标注出来. 所以,整个代码的逻辑是,根据输入的第一个整数生成第二个整数(答案),然后比较是否与输入的第二个整数相同.如果相同拆除炸弹,如果不同就爆炸. 答案共有8个:</p><table><thead><tr><th>num_1d</th><th>num_2x</th><th>num_2d</th></tr></thead><tbody><tr><td>0</td><td>0xcf</td><td>207</td></tr><tr><td>1</td><td>0x137</td><td>311</td></tr><tr><td>2</td><td>0x2c3</td><td>707</td></tr><tr><td>3</td><td>0x100</td><td>256</td></tr><tr><td>4</td><td>0x185</td><td>389</td></tr><tr><td>5</td><td>0xce</td><td>206</td></tr><tr><td>6</td><td>0x2aa</td><td>682</td></tr><tr><td>7</td><td>0x147</td><td>327</td></tr><tr><td>其中,选用 <code>3 256</code> 是最容易计算的.</td><td></td><td></td></tr></tbody></table><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>r</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>answer</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span style=--0:#B392F0>Starting</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>program:</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/mnt/e/Documents/C/CSAPP/bomb/bomb</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>answer</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>3</div></div><div class=code><span style=--0:#E1E4E8>[Thread debugging using libthread_db enabled]</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>4</div></div><div class=code><span style=--0:#B392F0>Using</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>host</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>libthread_db</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>library</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>"/lib/x86_64-linux-gnu/libthread_db.so.1".</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>5</div></div><div class=code><span style=--0:#B392F0>Welcome</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>to</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>my</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>fiendish</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>little</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>bomb.</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>You</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>have</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>6</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>phases</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>with</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>6</div></div><div class=code><span style=--0:#79B8FF>which</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>to</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>blow</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>yourself</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>up.</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>Have</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>nice</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>day!</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>7</div></div><div class=code><span style=--0:#B392F0>Phase</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>1</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>defused.</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>How</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>about</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>the</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>next</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>one?</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>8</div></div><div class=code><span style=--0:#B392F0>That</span><span style=--0:#B392F0>'s number 2.  Keep going!</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>9</div></div><div class=code><span style=--0:#B392F0>Halfway there!</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="(gdb) r answerStarting program: /mnt/e/Documents/C/CSAPP/bomb/bomb answer[Thread debugging using libthread_db enabled]Using host libthread_db library &#x22;/lib/x86_64-linux-gnu/libthread_db.so.1&#x22;.Welcome to my fiendish little bomb. You have 6 phases withwhich to blow yourself up. Have a nice day!Phase 1 defused. How about the next one?That&#x27;s number 2.  Keep going!Halfway there!" data-copied=Copied!><div></div></button></div></figure></div><p>成功了!</p><h1 id=phase_4>phase_4</h1><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>disassemble</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>phase_4</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span style=--0:#B392F0>Dump</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>of</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>assembler</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>code</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>for</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>function</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>phase_4:</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>3</div></div><div class=code><span style=--0:#9ECBFF>=</span><span style=--0:#E1E4E8>> </span><span style=--0:#79B8FF>0x000000000040100c</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+0>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>sub</span><span style=--0:#E1E4E8>    $0x18</span><span style=--0:#9ECBFF>,%rsp</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>4</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401010</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+4>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>lea</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0xc</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsp</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%rcx</span><span style=--0:#E1E4E8>                   </span><span style=--0:#99A0A6># %rcx = %rsp + 12</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>5</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401015</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+9>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>lea</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x8</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsp</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%rdx</span><span style=--0:#E1E4E8>                   </span><span style=--0:#99A0A6># %rdx = %rsp + 8</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>6</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040101a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+14>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x4025cf</span><span style=--0:#9ECBFF>,%esi</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>7</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040101f</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+19>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x0</span><span style=--0:#9ECBFF>,%eax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>8</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401024</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+24>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x400bf0</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;__isoc99_sscanf@plt></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>9</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401029</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+29>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>cmp</span><span style=--0:#E1E4E8>    $0x2</span><span style=--0:#9ECBFF>,%eax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>10</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040102c</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+32>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jne</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x401035</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_4+41></span><span style=--0:#E1E4E8>            </span><span style=--0:#99A0A6># 如果输入不是两个量,爆炸</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>11</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040102e</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+34>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>cmpl</span><span style=--0:#E1E4E8>   $0xe</span><span style=--0:#9ECBFF>,0x8</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsp</span><span style=--0:#E1E4E8>)                   </span><span style=--0:#99A0A6>#</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>12</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401033</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+39>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jbe</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x40103a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_4+46></span><span style=--0:#E1E4E8>            </span><span style=--0:#99A0A6># *(%rsp+8)&#x3C;=14</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>13</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401035</span><span style=--0:#E1E4E8> </span><span style=--0:#F97583>&#x3C;</span><span style=--0:#9ECBFF>+41>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x40143a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;explode_bomb></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>14</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040103a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+46>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0xe</span><span style=--0:#9ECBFF>,%edx</span><span style=--0:#E1E4E8>                        </span><span style=--0:#99A0A6># %edx = 14</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>15</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040103f</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+51>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x0</span><span style=--0:#9ECBFF>,%esi</span><span style=--0:#E1E4E8>                        </span><span style=--0:#99A0A6># %esi = 0</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>16</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401044</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+56>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x8</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsp</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%edi</span><span style=--0:#E1E4E8>                   </span><span style=--0:#99A0A6># %edi = *(%rsp+8),作为func4的第一个参数</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>17</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401048</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+60>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x400fce</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;func4></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>18</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040104d</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+65>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>test</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>%eax,%eax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>19</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040104f</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+67>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jne</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x401058</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_4+76></span><span style=--0:#E1E4E8>            </span><span style=--0:#99A0A6># %eax不是0,爆炸</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>20</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401051</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+69>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>cmpl</span><span style=--0:#E1E4E8>   $0x0</span><span style=--0:#9ECBFF>,0xc</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsp</span><span style=--0:#E1E4E8>)                   </span><span style=--0:#99A0A6># 第二个参数是0</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>21</div></div><div class=code><span style=--0:#B392F0>--Type</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;RET></span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>for</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>more,</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>q</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>to</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>quit,</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>c</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>to</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>continue</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>without</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>paging--c</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>22</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401056</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+74>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>je</span><span style=--0:#E1E4E8>     </span><span style=--0:#79B8FF>0x40105d</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_4+81></span><span style=--0:#E1E4E8>            </span><span style=--0:#99A0A6># *(%rsp+12)==0</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>23</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401058</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+76>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x40143a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;explode_bomb></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>24</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040105d</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+81>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>add</span><span style=--0:#E1E4E8>    $0x18</span><span style=--0:#9ECBFF>,%rsp</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>25</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401061</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+85>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>ret</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>26</div></div><div class=code><span style=--0:#B392F0>End</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>of</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>assembler</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>dump.</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="(gdb) disassemble phase_4Dump of assembler code for function phase_4:=> 0x000000000040100c <+0>:     sub    $0x18,%rsp   0x0000000000401010 <+4>:     lea    0xc(%rsp),%rcx                   # %rcx = %rsp + 12   0x0000000000401015 <+9>:     lea    0x8(%rsp),%rdx                   # %rdx = %rsp + 8   0x000000000040101a <+14>:    mov    $0x4025cf,%esi   0x000000000040101f <+19>:    mov    $0x0,%eax   0x0000000000401024 <+24>:    call   0x400bf0 <__isoc99_sscanf@plt>   0x0000000000401029 <+29>:    cmp    $0x2,%eax   0x000000000040102c <+32>:    jne    0x401035 <phase_4+41>            # 如果输入不是两个量,爆炸   0x000000000040102e <+34>:    cmpl   $0xe,0x8(%rsp)                   #   0x0000000000401033 <+39>:    jbe    0x40103a <phase_4+46>            # *(%rsp+8)<=14   0x0000000000401035 <+41>:    call   0x40143a <explode_bomb>   0x000000000040103a <+46>:    mov    $0xe,%edx                        # %edx = 14   0x000000000040103f <+51>:    mov    $0x0,%esi                        # %esi = 0   0x0000000000401044 <+56>:    mov    0x8(%rsp),%edi                   # %edi = *(%rsp+8),作为func4的第一个参数   0x0000000000401048 <+60>:    call   0x400fce <func4>   0x000000000040104d <+65>:    test   %eax,%eax   0x000000000040104f <+67>:    jne    0x401058 <phase_4+76>            # %eax不是0,爆炸   0x0000000000401051 <+69>:    cmpl   $0x0,0xc(%rsp)                   # 第二个参数是0--Type <RET> for more, q to quit, c to continue without paging--c   0x0000000000401056 <+74>:    je     0x40105d <phase_4+81>            # *(%rsp+12)==0   0x0000000000401058 <+76>:    call   0x40143a <explode_bomb>   0x000000000040105d <+81>:    add    $0x18,%rsp   0x0000000000401061 <+85>:    retEnd of assembler dump." data-copied=Copied!><div></div></button></div></figure></div><p>依照套路,查看0x4025cf</p><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>x</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/s</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0x4025cf</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span style=--0:#B392F0>0x4025cf:</span><span style=--0:#E1E4E8>       </span><span style=--0:#9ECBFF>"%d %d"</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="(gdb) x /s 0x4025cf0x4025cf:       &#x22;%d %d&#x22;" data-copied=Copied!><div></div></button></div></figure></div><p>跟phase_3用的是同一个,sscanf接收两个整数输入.</p><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>disassemble</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>func4</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span style=--0:#B392F0>Dump</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>of</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>assembler</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>code</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>for</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>function</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>func4:</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>3</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400fce</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+0>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>sub</span><span style=--0:#E1E4E8>    $0x8</span><span style=--0:#9ECBFF>,%rsp</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>4</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400fd2</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+4>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%edx,%eax</span><span style=--0:#E1E4E8>                      </span><span style=--0:#99A0A6># %eax = 14</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>5</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400fd4</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+6>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>sub</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%esi,%eax</span><span style=--0:#E1E4E8>                      </span><span style=--0:#99A0A6># %eax -= 0</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>6</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400fd6</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+8>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%eax,%ecx</span><span style=--0:#E1E4E8>                      </span><span style=--0:#99A0A6># %ecx = %eax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>7</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400fd8</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+10>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>shr</span><span style=--0:#E1E4E8>    $0x1f</span><span style=--0:#9ECBFF>,%ecx</span><span style=--0:#E1E4E8>                     </span><span style=--0:#99A0A6># %ecx = %ecx的最高位(逻辑右移31位)</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>8</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400fdb</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+13>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>add</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%ecx,%eax</span><span style=--0:#E1E4E8>                      </span><span style=--0:#99A0A6># %eax += %ecx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>9</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400fdd</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+15>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>sar</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%eax</span><span style=--0:#E1E4E8>                           </span><span style=--0:#99A0A6># %eax算术右移1位=7</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>10</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400fdf</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+17>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>lea</span><span style=--0:#E1E4E8>    (%rax,%rsi,1),%ecx             </span><span style=--0:#99A0A6># %ecx = %rax + %rsi=7</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>11</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400fe2</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+20>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>cmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%edi,%ecx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>12</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400fe4</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+22>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jle</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x400ff2</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;func4+36></span><span style=--0:#E1E4E8>            </span><span style=--0:#99A0A6># 如果%ecx&#x3C;=%edi</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>13</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400fe6</span><span style=--0:#E1E4E8> </span><span style=--0:#F97583>&#x3C;</span><span style=--0:#9ECBFF>+24>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>lea</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>-0x1(%rcx</span><span style=--0:#E1E4E8>),%edx                </span><span style=--0:#99A0A6>#</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>14</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400fe9</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+27>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x400fce</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;func4></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>15</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400fee</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+32>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>add</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%eax,%eax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>16</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400ff0</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+34>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x401007</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;func4+57></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>17</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400ff2</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+36>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x0</span><span style=--0:#9ECBFF>,%eax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>18</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400ff7</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+41>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>cmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%edi,%ecx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>19</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400ff9</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+43>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jge</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x401007</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;func4+57></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>20</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400ffb</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+45>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>lea</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x1</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rcx</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%esi</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>21</div></div><div class=code><span style=--0:#B392F0>--Type</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;RET></span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>for</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>more,</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>q</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>to</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>quit,</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>c</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>to</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>continue</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>without</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>paging--c</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>22</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000400ffe</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+48>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x400fce</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;func4></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>23</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401003</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+53>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>lea</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x1</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rax,%rax,1</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%eax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>24</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401007</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+57>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>add</span><span style=--0:#E1E4E8>    $0x8</span><span style=--0:#9ECBFF>,%rsp</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>25</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040100b</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+61>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>ret</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>26</div></div><div class=code><span style=--0:#B392F0>End</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>of</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>assembler</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>dump.</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="(gdb) disassemble func4Dump of assembler code for function func4:   0x0000000000400fce <+0>:     sub    $0x8,%rsp   0x0000000000400fd2 <+4>:     mov    %edx,%eax                      # %eax = 14   0x0000000000400fd4 <+6>:     sub    %esi,%eax                      # %eax -= 0   0x0000000000400fd6 <+8>:     mov    %eax,%ecx                      # %ecx = %eax   0x0000000000400fd8 <+10>:    shr    $0x1f,%ecx                     # %ecx = %ecx的最高位(逻辑右移31位)   0x0000000000400fdb <+13>:    add    %ecx,%eax                      # %eax += %ecx   0x0000000000400fdd <+15>:    sar    %eax                           # %eax算术右移1位=7   0x0000000000400fdf <+17>:    lea    (%rax,%rsi,1),%ecx             # %ecx = %rax + %rsi=7   0x0000000000400fe2 <+20>:    cmp    %edi,%ecx   0x0000000000400fe4 <+22>:    jle    0x400ff2 <func4+36>            # 如果%ecx<=%edi   0x0000000000400fe6 <+24>:    lea    -0x1(%rcx),%edx                #   0x0000000000400fe9 <+27>:    call   0x400fce <func4>   0x0000000000400fee <+32>:    add    %eax,%eax   0x0000000000400ff0 <+34>:    jmp    0x401007 <func4+57>   0x0000000000400ff2 <+36>:    mov    $0x0,%eax   0x0000000000400ff7 <+41>:    cmp    %edi,%ecx   0x0000000000400ff9 <+43>:    jge    0x401007 <func4+57>   0x0000000000400ffb <+45>:    lea    0x1(%rcx),%esi--Type <RET> for more, q to quit, c to continue without paging--c   0x0000000000400ffe <+48>:    call   0x400fce <func4>   0x0000000000401003 <+53>:    lea    0x1(%rax,%rax,1),%eax   0x0000000000401007 <+57>:    add    $0x8,%rsp   0x000000000040100b <+61>:    retEnd of assembler dump." data-copied=Copied!><div></div></button></div></figure></div><p>实在太混乱了,我只好学习如何单步执行汇编代码: 在gdb中,</p><div class=expressive-code><figure class=frame><figcaption class=header></figcaption><pre data-language=plaintext><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#e1e4e8>b explode_bomb</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span style=--0:#e1e4e8>b phase_4</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>3</div></div><div class=code><span style=--0:#e1e4e8>set diassamble-next-line on</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>4</div></div><div class=code><span style=--0:#e1e4e8>layout regs</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>5</div></div><div class=code><span style=--0:#e1e4e8>r answer</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>6</div></div><div class=code><span style=--0:#e1e4e8>si</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>7</div></div><div class=code><span style=--0:#e1e4e8>si</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>8</div></div><div class=code><span style=--0:#e1e4e8>...</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>9</div></div><div class=code><span style=--0:#e1e4e8>ni</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>10</div></div><div class=code><span style=--0:#e1e4e8>...</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="b explode_bombb phase_4set diassamble-next-line onlayout regsr answersisi...ni..." data-copied=Copied!><div></div></button></div></figure></div><p>这是执行 <code>4 5</code>后首次来到fun4函数的界面,%eax和%edx初始化为14 <img decoding=async fetchpriority=auto height=1826 loading=lazy src=/_astro/Pasted%20image%2020250121000524.C4DnT4D7_Z2ulPRn.webp width=3072> %eax右移得到7 <img decoding=async fetchpriority=auto height=1826 loading=lazy src=/_astro/Pasted%20image%2020250121000824.DxchS22P_1u3anE.webp width=3072> 把我输入的第一个参数与7比较,发现7>4,现在%edx变为%ecx-1=6 <img decoding=async fetchpriority=auto height=1826 loading=lazy src=/_astro/Pasted%20image%2020250121001355.BwItj8F8_1IEKeM.webp width=3072> 并且进入了函数嵌套.回到这一步,现在3&#x3C;=4,%eax设置为0 <img decoding=async fetchpriority=auto height=1826 loading=lazy src=/_astro/Pasted%20image%2020250121001721.C9EU0Az5_1fT160.webp width=3072> 发现4>3,又进入函数嵌套 现在%eax=(6-4)/2=1, <img decoding=async fetchpriority=auto height=1826 loading=lazy src=/_astro/Pasted%20image%2020250121002825.6Lf1McfV_ZmCpfj.webp width=3072></p><p>经过这么调试加上这个程序流程图,我大概才明白了这块代码要得到返回0值应该满足7,3,1,0. <img decoding=async fetchpriority=auto height=1525 loading=lazy src=/_astro/Pasted%20image%2020250121005112.BkgD4eO-_ZAvNSr.webp width=741></p><p>但是对于其他数,它返回值是什么含义呢?好像很混乱,我没有想明白. 至此,我发现了</p><ul><li>调用函数需要栈顶指针减小,函数返回栈顶指针回去</li><li><code>sscanf</code>函数声明为</li></ul><div class=expressive-code><figure class=frame><figcaption class=header></figcaption><pre data-language=c><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#F97583>int</span><span style=--0:#E1E4E8> </span><span style=--0:#B392F0>sscanf</span><span style=--0:#E1E4E8>(</span><span style=--0:#F97583>const</span><span style=--0:#E1E4E8> </span><span style=--0:#F97583>char</span><span style=--0:#E1E4E8> </span><span style=--0:#F97583>*</span><span style=--0:#FFAB70>s</span><span style=--0:#E1E4E8>, </span><span style=--0:#F97583>const</span><span style=--0:#E1E4E8> </span><span style=--0:#F97583>char</span><span style=--0:#E1E4E8> </span><span style=--0:#F97583>*</span><span style=--0:#FFAB70>format</span><span style=--0:#E1E4E8>, ... );</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="int sscanf(const char *s, const char *format, ... );" data-copied=Copied!><div></div></button></div></figure></div><p>这就是format指针用第二个参数%esi传入的原因.</p><h1 id=phase_5>phase_5</h1><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>disassemble</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>phase_5</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span style=--0:#B392F0>Dump</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>of</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>assembler</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>code</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>for</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>function</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>phase_5:</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>3</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401062</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+0>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>push</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>%rbx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>4</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401063</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+1>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>sub</span><span style=--0:#E1E4E8>    $0x20</span><span style=--0:#9ECBFF>,%rsp</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>5</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401067</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+5>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%rdi,%rbx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>6</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040106a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+8>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%fs:0x28,%rax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>7</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401073</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+17>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%rax,0x18</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsp</span><span style=--0:#E1E4E8>)</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>8</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401078</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+22>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>xor</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%eax,%eax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>9</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040107a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+24>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x40131b</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;string_length></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>10</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040107f</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+29>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>cmp</span><span style=--0:#E1E4E8>    $0x6</span><span style=--0:#9ECBFF>,%eax</span><span style=--0:#E1E4E8>                    </span><span style=--0:#99A0A6># input的string_length是6.</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>11</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401082</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+32>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>je</span><span style=--0:#E1E4E8>     </span><span style=--0:#79B8FF>0x4010d2</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_5+112></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>12</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401084</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+34>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x40143a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;explode_bomb></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>13</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401089</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+39>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x4010d2</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_5+112></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>14</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040108b</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+41>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>movzbl</span><span style=--0:#E1E4E8> (%rbx,%rax,1),%ecx           </span><span style=--0:#99A0A6># 第%rax字符</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>15</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040108f</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+45>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%cl,</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsp</span><span style=--0:#E1E4E8>)</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>16</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401092</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+48>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    (%rsp),%rdx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>17</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401096</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+52>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>and</span><span style=--0:#E1E4E8>    $0xf</span><span style=--0:#9ECBFF>,%edx</span><span style=--0:#E1E4E8>                    </span><span style=--0:#99A0A6># 只取低4位</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>18</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401099</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+55>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>movzbl</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0x4024b0</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rdx</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%edx</span><span style=--0:#E1E4E8>          </span><span style=--0:#99A0A6># 0x4024b0+这4位的内存的值存储到%edx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>19</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010a0</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+62>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%dl,0x10</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsp,%rax,1</span><span style=--0:#E1E4E8>)        </span><span style=--0:#99A0A6>#</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>20</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010a4</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+66>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>add</span><span style=--0:#E1E4E8>    $0x1</span><span style=--0:#9ECBFF>,%rax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>21</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010a8</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+70>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>cmp</span><span style=--0:#E1E4E8>    $0x6</span><span style=--0:#9ECBFF>,%rax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>22</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010ac</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+74>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jne</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x40108b</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_5+41></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>23</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010ae</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+76>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>movb</span><span style=--0:#E1E4E8>   $0x0</span><span style=--0:#9ECBFF>,0x16</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsp</span><span style=--0:#E1E4E8>)</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>24</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010b3</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+81>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x40245e</span><span style=--0:#9ECBFF>,%esi</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>25</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010b8</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+86>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>lea</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x10</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsp</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%rdi</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>26</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010bd</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+91>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x401338</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;strings_not_equal></span><span style=--0:#E1E4E8> </span><span style=--0:#99A0A6># 从%rdi开始的字符串与0x401338的字符串比较</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>27</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010c2</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+96>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>test</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>%eax,%eax</span><span style=--0:#E1E4E8>                    </span><span style=--0:#99A0A6># 相同返回0</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>28</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010c4</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+98>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>je</span><span style=--0:#E1E4E8>     </span><span style=--0:#79B8FF>0x4010d9</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_5+119></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>29</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010c6</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+100>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x40143a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;explode_bomb></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>30</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010cb</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+105>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>nopl</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x0</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rax,%rax,1</span><span style=--0:#E1E4E8>)</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>31</div></div><div class=code><span style=--0:#B392F0>--Type</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;RET></span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>for</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>more,</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>q</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>to</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>quit,</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>c</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>to</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>continue</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>without</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>paging--c</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>32</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010d0</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+110>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>jmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x4010d9</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_5+119></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>33</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010d2</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+112>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x0</span><span style=--0:#9ECBFF>,%eax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>34</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010d7</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+117>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>jmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x40108b</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_5+41></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>35</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010d9</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+119>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x18</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsp</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%rax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>36</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010de</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+124>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>xor</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%fs:0x28,%rax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>37</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010e7</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+133>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>je</span><span style=--0:#E1E4E8>     </span><span style=--0:#79B8FF>0x4010ee</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_5+140></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>38</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010e9</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+135>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x400b30</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;__stack_chk_fail@plt></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>39</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010ee</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+140>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>add</span><span style=--0:#E1E4E8>    $0x20</span><span style=--0:#9ECBFF>,%rsp</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>40</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010f2</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+144>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>pop</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%rbx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>41</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010f3</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+145>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>ret</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>42</div></div><div class=code><span style=--0:#B392F0>End</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>of</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>assembler</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>dump.</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="(gdb) disassemble phase_5Dump of assembler code for function phase_5:   0x0000000000401062 <+0>:     push   %rbx   0x0000000000401063 <+1>:     sub    $0x20,%rsp   0x0000000000401067 <+5>:     mov    %rdi,%rbx   0x000000000040106a <+8>:     mov    %fs:0x28,%rax   0x0000000000401073 <+17>:    mov    %rax,0x18(%rsp)   0x0000000000401078 <+22>:    xor    %eax,%eax   0x000000000040107a <+24>:    call   0x40131b <string_length>   0x000000000040107f <+29>:    cmp    $0x6,%eax                    # input的string_length是6.   0x0000000000401082 <+32>:    je     0x4010d2 <phase_5+112>   0x0000000000401084 <+34>:    call   0x40143a <explode_bomb>   0x0000000000401089 <+39>:    jmp    0x4010d2 <phase_5+112>   0x000000000040108b <+41>:    movzbl (%rbx,%rax,1),%ecx           # 第%rax字符   0x000000000040108f <+45>:    mov    %cl,(%rsp)   0x0000000000401092 <+48>:    mov    (%rsp),%rdx   0x0000000000401096 <+52>:    and    $0xf,%edx                    # 只取低4位   0x0000000000401099 <+55>:    movzbl 0x4024b0(%rdx),%edx          # 0x4024b0+这4位的内存的值存储到%edx   0x00000000004010a0 <+62>:    mov    %dl,0x10(%rsp,%rax,1)        #   0x00000000004010a4 <+66>:    add    $0x1,%rax   0x00000000004010a8 <+70>:    cmp    $0x6,%rax   0x00000000004010ac <+74>:    jne    0x40108b <phase_5+41>   0x00000000004010ae <+76>:    movb   $0x0,0x16(%rsp)   0x00000000004010b3 <+81>:    mov    $0x40245e,%esi   0x00000000004010b8 <+86>:    lea    0x10(%rsp),%rdi   0x00000000004010bd <+91>:    call   0x401338 <strings_not_equal> # 从%rdi开始的字符串与0x401338的字符串比较   0x00000000004010c2 <+96>:    test   %eax,%eax                    # 相同返回0   0x00000000004010c4 <+98>:    je     0x4010d9 <phase_5+119>   0x00000000004010c6 <+100>:   call   0x40143a <explode_bomb>   0x00000000004010cb <+105>:   nopl   0x0(%rax,%rax,1)--Type <RET> for more, q to quit, c to continue without paging--c   0x00000000004010d0 <+110>:   jmp    0x4010d9 <phase_5+119>   0x00000000004010d2 <+112>:   mov    $0x0,%eax   0x00000000004010d7 <+117>:   jmp    0x40108b <phase_5+41>   0x00000000004010d9 <+119>:   mov    0x18(%rsp),%rax   0x00000000004010de <+124>:   xor    %fs:0x28,%rax   0x00000000004010e7 <+133>:   je     0x4010ee <phase_5+140>   0x00000000004010e9 <+135>:   call   0x400b30 <__stack_chk_fail@plt>   0x00000000004010ee <+140>:   add    $0x20,%rsp   0x00000000004010f2 <+144>:   pop    %rbx   0x00000000004010f3 <+145>:   retEnd of assembler dump." data-copied=Copied!><div></div></button></div></figure></div><p>这里出现了</p><div class=expressive-code><figure class=frame><figcaption class=header></figcaption><pre data-language=plaintext><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span class=indent><span style=--0:#e1e4e8>   </span></span><span style=--0:#e1e4e8>0x000000000040106a &#x3C;+8>:     mov    %fs:0x28,%rax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span class=indent><span style=--0:#e1e4e8>   </span></span><span style=--0:#e1e4e8>0x0000000000401073 &#x3C;+17>:    mov    %rax,0x18(%rsp)</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>3</div></div><div class=code><span class=indent><span style=--0:#e1e4e8>   </span></span><span style=--0:#e1e4e8>...</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>4</div></div><div class=code><span class=indent><span style=--0:#e1e4e8>   </span></span><span style=--0:#e1e4e8>0x00000000004010de &#x3C;+124>:   xor    %fs:0x28,%rax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>5</div></div><div class=code><span class=indent><span style=--0:#e1e4e8>   </span></span><span style=--0:#e1e4e8>0x00000000004010e7 &#x3C;+133>:   je     0x4010ee &#x3C;phase_5+140></span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="   0x000000000040106a <+8>:     mov    %fs:0x28,%rax   0x0000000000401073 <+17>:    mov    %rax,0x18(%rsp)   ...   0x00000000004010de <+124>:   xor    %fs:0x28,%rax   0x00000000004010e7 <+133>:   je     0x4010ee <phase_5+140>" data-copied=Copied!><div></div></button></div></figure></div><p>虽然与解开炸弹无关,但经过查阅资料后了解到</p><blockquote><p>为了访问特殊的操作系统数据结构，<code>FS</code>和<code>GS</code>寄存器都可以用作基准指针地址。因此，您所看到的是从<code>FS</code>寄存器中持有的值加载到偏移量处的值，而不是对<code>FS</code>寄存器内容的位操作。 具体而言，在Linux上的<code>FS:0x28</code>正在存储一个特殊的哨兵堆栈保护值，而代码正在执行堆栈保护检查。例如，如果进一步查看代码，您将看到<code>FS:0x28</code>中的值存储在堆栈上，然后会召回堆栈的内容，并在<code>FS:0x28</code>处使用原始值执行<code>XOR</code>。如果这两个值相等，这意味着由于<code>XOR</code>‘对两个相同的值中的两个值产生零值而设置了零位，那么我们跳到<code>test</code>例程，否则我们跳转到一个特殊的函数，该函数指示堆栈以某种方式损坏，并且存储在堆栈上的前哨值被更改。 首先input的string_length是6.然后循环6此读取输入的字符,从%rsp到%rsp+5,转换后存储到%rsp+0x10到%rsp+0x15,并与0x401338的字符串比较 查看0x401338</p></blockquote><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>x</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/s</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0x40245e</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span style=--0:#B392F0>0x40245e:</span><span style=--0:#E1E4E8>       </span><span style=--0:#9ECBFF>"flyers"</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="(gdb) x /s 0x40245e0x40245e:       &#x22;flyers&#x22;" data-copied=Copied!><div></div></button></div></figure></div><p>果然是6个字符. 再查看</p><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>)  </span><span style=--0:#B392F0>x</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/s</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0x4024b0</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span style=--0:#B392F0>0x4024b0</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;array.3449>:</span><span style=--0:#E1E4E8>  </span><span style=--0:#9ECBFF>"maduiersnfotvbylSo you think you can stop the bomb with ctrl-c, do you?"</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="(gdb)  x /s 0x4024b00x4024b0 <array.3449>:  &#x22;maduiersnfotvbylSo you think you can stop the bomb with ctrl-c, do you?&#x22;" data-copied=Copied!><div></div></button></div></figure></div><p>由于只有输入的低4位有用,也就是要从前15个字符中寻找”flyers”.依次是 9 15 14 5 6 7 所以有多个答案,只要字符的ASCII码值模16的余数依次是这6个数就行.直接在gdb中打印</p><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#79B8FF>printf</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>"%c %c %c %c %c %c",9+64,15+64,14+64,5+64,6+64,7+64</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span style=--0:#B392F0>I</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>O</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>N</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>E</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>F</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>G</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="(gdb) printf &#x22;%c %c %c %c %c %c&#x22;,9+64,15+64,14+64,5+64,6+64,7+64I O N E F G" data-copied=Copied!><div></div></button></div></figure></div><p>在answer文件中加上这一行,运行</p><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>r</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>answer</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span style=--0:#B392F0>Starting</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>program:</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/mnt/e/Documents/C/CSAPP/bomb/bomb</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>answer</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>3</div></div><div class=code><span style=--0:#E1E4E8>[Thread debugging using libthread_db enabled]</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>4</div></div><div class=code><span style=--0:#B392F0>Using</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>host</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>libthread_db</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>library</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>"/lib/x86_64-linux-gnu/libthread_db.so.1".</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>5</div></div><div class=code><span style=--0:#B392F0>Welcome</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>to</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>my</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>fiendish</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>little</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>bomb.</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>You</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>have</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>6</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>phases</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>with</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>6</div></div><div class=code><span style=--0:#79B8FF>which</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>to</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>blow</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>yourself</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>up.</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>Have</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>nice</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>day!</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>7</div></div><div class=code><span style=--0:#B392F0>Phase</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>1</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>defused.</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>How</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>about</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>the</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>next</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>one?</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>8</div></div><div class=code><span style=--0:#B392F0>That</span><span style=--0:#B392F0>'s number 2.  Keep going!</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>9</div></div><div class=code><span style=--0:#B392F0>Halfway there!</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>10</div></div><div class=code><span style=--0:#B392F0>So you got that one.  Try this one.</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>11</div></div><div class=code><span style=--0:#B392F0>Good work!  On to the next...</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="(gdb) r answerStarting program: /mnt/e/Documents/C/CSAPP/bomb/bomb answer[Thread debugging using libthread_db enabled]Using host libthread_db library &#x22;/lib/x86_64-linux-gnu/libthread_db.so.1&#x22;.Welcome to my fiendish little bomb. You have 6 phases withwhich to blow yourself up. Have a nice day!Phase 1 defused. How about the next one?That&#x27;s number 2.  Keep going!Halfway there!So you got that one.  Try this one.Good work!  On to the next..." data-copied=Copied!><div></div></button></div></figure></div><p>成功了!</p><h1 id=phase_6>phase_6</h1><p>来到最后一个!</p><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>disassemble</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>phase_6</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span style=--0:#B392F0>Dump</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>of</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>assembler</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>code</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>for</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>function</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>phase_6:</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>3</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010f4</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+0>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>push</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>%r14</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>4</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010f6</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+2>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>push</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>%r13</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>5</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010f8</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+4>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>push</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>%r12</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>6</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010fa</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+6>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>push</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>%rbp</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>7</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010fb</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+7>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>push</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>%rbx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>8</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004010fc</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+8>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#9ECBFF>sub</span><span style=--0:#E1E4E8>    $0x50</span><span style=--0:#9ECBFF>,%rsp</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>9</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401100</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+12>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%rsp,%r13</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>10</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401103</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+15>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%rsp,%rsi</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>11</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401106</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+18>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x40145c</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;read_six_numbers></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>12</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040110b</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+23>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%rsp,%r14</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>13</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040110e</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+26>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x0</span><span style=--0:#9ECBFF>,%r12d</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>14</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401114</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+32>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%r13,%rbp</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>15</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401117</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+35>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x0</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%r13</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%eax</span><span style=--0:#E1E4E8>                  </span><span style=--0:#99A0A6># %r13是%rsp</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>16</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040111b</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+39>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>sub</span><span style=--0:#E1E4E8>    $0x1</span><span style=--0:#9ECBFF>,%eax</span><span style=--0:#E1E4E8>                       </span><span style=--0:#99A0A6>#</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>17</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040111e</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+42>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>cmp</span><span style=--0:#E1E4E8>    $0x5</span><span style=--0:#9ECBFF>,%eax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>18</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401121</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+45>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jbe</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x401128</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_6+52></span><span style=--0:#E1E4E8>           </span><span style=--0:#99A0A6># %rsp&#x3C;=6</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>19</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401123</span><span style=--0:#E1E4E8> </span><span style=--0:#F97583>&#x3C;</span><span style=--0:#9ECBFF>+47>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x40143a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;explode_bomb></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>20</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401128</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+52>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>add</span><span style=--0:#E1E4E8>    $0x1</span><span style=--0:#9ECBFF>,%r12d</span><span style=--0:#E1E4E8>                      </span><span style=--0:#99A0A6># %r12d+=1</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>21</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040112c</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+56>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>cmp</span><span style=--0:#E1E4E8>    $0x6</span><span style=--0:#9ECBFF>,%r12d</span><span style=--0:#E1E4E8>                      </span><span style=--0:#99A0A6># 1 ~ 5</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>22</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401130</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+60>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>je</span><span style=--0:#E1E4E8>     </span><span style=--0:#79B8FF>0x401153</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_6+95></span><span style=--0:#E1E4E8>           </span><span style=--0:#99A0A6>#</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>23</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401132</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+62>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%r12d,%ebx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>24</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401135</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+65>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>movslq</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>%ebx,%rax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>25</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401138</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+68>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    (%rsp,%rax,4),%eax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>26</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040113b</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+71>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>cmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%eax,0x0</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rbp</span><span style=--0:#E1E4E8>)                  </span><span style=--0:#99A0A6># 比较第2个到第6个数与第1个数</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>27</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040113e</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+74>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jne</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x401145</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_6+81></span><span style=--0:#E1E4E8>           </span><span style=--0:#99A0A6># 不能相等</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>28</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401140</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+76>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x40143a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;explode_bomb></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>29</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401145</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+81>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>add</span><span style=--0:#E1E4E8>    $0x1</span><span style=--0:#9ECBFF>,%ebx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>30</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401148</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+84>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>cmp</span><span style=--0:#E1E4E8>    $0x5</span><span style=--0:#9ECBFF>,%ebx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>31</div></div><div class=code><span style=--0:#B392F0>--Type</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;RET></span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>for</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>more,</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>q</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>to</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>quit,</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>c</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>to</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>continue</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>without</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>paging--c</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>32</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040114b</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+87>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jle</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x401135</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_6+65></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>33</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040114d</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+89>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>add</span><span style=--0:#E1E4E8>    $0x4</span><span style=--0:#9ECBFF>,%r13</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>34</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401151</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+93>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>jmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x401114</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_6+32></span><span style=--0:#E1E4E8>           </span><span style=--0:#99A0A6># 所有6个数字都&#x3C;=6,并且互不相等,结束以上循环</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>35</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401153</span><span style=--0:#E1E4E8> </span><span style=--0:#F97583>&#x3C;</span><span style=--0:#9ECBFF>+95>:</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>lea</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x18</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsp</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%rsi</span><span style=--0:#E1E4E8>                 </span><span style=--0:#99A0A6># %rsi=%rsp+24</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>36</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401158</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+100>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%r14,%rax</span><span style=--0:#E1E4E8>                       </span><span style=--0:#99A0A6># %r14=%rsp=%rax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>37</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040115b</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+103>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x7</span><span style=--0:#9ECBFF>,%ecx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>38</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401160</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+108>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%ecx,%edx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>39</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401162</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+110>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>sub</span><span style=--0:#E1E4E8>    (%rax),%edx                     </span><span style=--0:#99A0A6># %edx=7-(%rsp第1个整数)</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>40</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401164</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+112>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%edx,</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rax</span><span style=--0:#E1E4E8>)                     </span><span style=--0:#99A0A6># 替换</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>41</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401166</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+114>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>add</span><span style=--0:#E1E4E8>    $0x4</span><span style=--0:#9ECBFF>,%rax</span><span style=--0:#E1E4E8>                       </span><span style=--0:#99A0A6># 下一个整数</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>42</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040116a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+118>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>cmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%rsi,%rax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>43</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040116d</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+121>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>jne</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x401160</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_6+108></span><span style=--0:#E1E4E8>          </span><span style=--0:#99A0A6># 对6个整数都这样操作</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>44</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040116f</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+123>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x0</span><span style=--0:#9ECBFF>,%esi</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>45</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401174</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+128>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>jmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x401197</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_6+163></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>46</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401176</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+130>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x8</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rdx</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%rdx</span><span style=--0:#E1E4E8>                 </span><span style=--0:#99A0A6># %rdx=(%rdx+8) 0x6032d0这是一个链表</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>47</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040117a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+134>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>add</span><span style=--0:#E1E4E8>    $0x1</span><span style=--0:#9ECBFF>,%eax</span><span style=--0:#E1E4E8>                      </span><span style=--0:#99A0A6># %eax刚到这里时是1,现在加1是2</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>48</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040117d</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+137>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>cmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%ecx,%eax</span><span style=--0:#E1E4E8>                      </span><span style=--0:#99A0A6># 比较%rax和</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>49</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040117f</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+139>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>jne</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x401176</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_6+130></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>50</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401181</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+141>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>jmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x401188</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_6+148></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>51</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401183</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+143>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x6032d0</span><span style=--0:#9ECBFF>,%edx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>52</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401188</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+148>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%rdx,0x20</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsp,%rsi,2</span><span style=--0:#E1E4E8>)         </span><span style=--0:#99A0A6># (%rsp+32/40/...)=0x6032d0</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>53</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040118d</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+153>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>add</span><span style=--0:#E1E4E8>    $0x4</span><span style=--0:#9ECBFF>,%rsi</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>54</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401191</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+157>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>cmp</span><span style=--0:#E1E4E8>    $0x18</span><span style=--0:#9ECBFF>,%rsi</span><span style=--0:#E1E4E8>                     </span><span style=--0:#99A0A6># 6次操作</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>55</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401195</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+161>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>je</span><span style=--0:#E1E4E8>     </span><span style=--0:#79B8FF>0x4011ab</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_6+183></span><span style=--0:#E1E4E8>         </span><span style=--0:#99A0A6># 6次操作</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>56</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401197</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+163>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    (%rsp,%rsi,1),%ecx            </span><span style=--0:#99A0A6># 下一个整数</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>57</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040119a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+166>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>cmp</span><span style=--0:#E1E4E8>    $0x1</span><span style=--0:#9ECBFF>,%ecx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>58</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040119d</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+169>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>jle</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x401183</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_6+143></span><span style=--0:#E1E4E8>        </span><span style=--0:#99A0A6># 如果一个整数是1,安排链表头指针</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>59</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x000000000040119f</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+171>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x1</span><span style=--0:#9ECBFF>,%eax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>60</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011a4</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+176>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x6032d0</span><span style=--0:#9ECBFF>,%edx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>61</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011a9</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+181>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>jmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x401176</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_6+130></span><span style=--0:#E1E4E8>        </span><span style=--0:#99A0A6># 我算是看明白了,整数是多少,对应位置就是指向链表第几个元素的地址</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>62</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011ab</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+183>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x20</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsp</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%rbx</span><span style=--0:#E1E4E8>              </span><span style=--0:#99A0A6># %rbx = 链表[第1个整数]的地址</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>63</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011b0</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+188>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>lea</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x28</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsp</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%rax</span><span style=--0:#E1E4E8>              </span><span style=--0:#99A0A6># %rax= 链表[第二个整数]的地址的地址</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>64</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011b5</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+193>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>lea</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x50</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rsp</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%rsi</span><span style=--0:#E1E4E8>              </span><span style=--0:#99A0A6># %rsi = 链表[最后一个整数]的地址的地址</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>65</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011ba</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+198>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%rbx,%rcx</span><span style=--0:#E1E4E8>                    </span><span style=--0:#99A0A6># %rcx = 链表[第一个整数]的地址</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>66</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011bd</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+201>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    (%rax),%rdx                  </span><span style=--0:#99A0A6># %rdx = 链表[第二个整数]的地址</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>67</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011c0</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+204>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%rdx,0x8</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rcx</span><span style=--0:#E1E4E8>)               </span><span style=--0:#99A0A6>#</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>68</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011c4</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+208>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>add</span><span style=--0:#E1E4E8>    $0x8</span><span style=--0:#9ECBFF>,%rax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>69</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011c8</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+212>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>cmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%rsi,%rax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>70</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011cb</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+215>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>je</span><span style=--0:#E1E4E8>     </span><span style=--0:#79B8FF>0x4011d2</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_6+222></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>71</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011cd</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+217>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%rdx,%rcx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>72</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011d0</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+220>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>jmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x4011bd</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_6+201></span><span style=--0:#E1E4E8>      </span><span style=--0:#99A0A6># 重新排列了这个链表</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>73</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011d2</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+222>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>movq</span><span style=--0:#E1E4E8>   $0x0</span><span style=--0:#9ECBFF>,0x8</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rdx</span><span style=--0:#E1E4E8>)              </span><span style=--0:#99A0A6># 尾指针设为0</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>74</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011da</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+230>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    $0x5</span><span style=--0:#9ECBFF>,%ebp</span><span style=--0:#E1E4E8>                   </span><span style=--0:#99A0A6>#</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>75</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011df</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+235>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x8</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rbx</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%rax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>76</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011e3</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+239>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    (%rax),%eax</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>77</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011e5</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+241>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>cmp</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%eax,</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rbx</span><span style=--0:#E1E4E8>)                 </span><span style=--0:#99A0A6># 链表[第1个整数]>=链表[第2个整数]</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>78</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011e7</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+243>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>jge</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x4011ee</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_6+250></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>79</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011e9</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+245>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>call</span><span style=--0:#E1E4E8>   </span><span style=--0:#79B8FF>0x40143a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;explode_bomb></span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>80</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011ee</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+250>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>mov</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x8</span><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>%rbx</span><span style=--0:#E1E4E8>)</span><span style=--0:#9ECBFF>,%rbx</span><span style=--0:#E1E4E8>              </span><span style=--0:#99A0A6>#</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>81</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011f2</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+254>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>sub</span><span style=--0:#E1E4E8>    $0x1</span><span style=--0:#9ECBFF>,%ebp</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>82</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011f5</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+257>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>jne</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x4011df</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;phase_6+235></span><span style=--0:#E1E4E8>      </span><span style=--0:#99A0A6># 要求链表降序排列</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>83</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011f7</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+259>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>add</span><span style=--0:#E1E4E8>    $0x50</span><span style=--0:#9ECBFF>,%rsp</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>84</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011fb</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+263>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>pop</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%rbx</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>85</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011fc</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+264>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>pop</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%rbp</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>86</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011fd</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+265>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>pop</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%r12</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>87</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x00000000004011ff</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+267>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>pop</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%r13</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>88</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401201</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+269>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>pop</span><span style=--0:#E1E4E8>    </span><span style=--0:#9ECBFF>%r14</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>89</div></div><div class=code><span class=indent>   </span><span style=--0:#B392F0>0x0000000000401203</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;+271>:</span><span style=--0:#E1E4E8>   </span><span style=--0:#9ECBFF>ret</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>90</div></div><div class=code><span style=--0:#B392F0>End</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>of</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>assembler</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>dump.</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="(gdb) disassemble phase_6Dump of assembler code for function phase_6:   0x00000000004010f4 <+0>:     push   %r14   0x00000000004010f6 <+2>:     push   %r13   0x00000000004010f8 <+4>:     push   %r12   0x00000000004010fa <+6>:     push   %rbp   0x00000000004010fb <+7>:     push   %rbx   0x00000000004010fc <+8>:     sub    $0x50,%rsp   0x0000000000401100 <+12>:    mov    %rsp,%r13   0x0000000000401103 <+15>:    mov    %rsp,%rsi   0x0000000000401106 <+18>:    call   0x40145c <read_six_numbers>   0x000000000040110b <+23>:    mov    %rsp,%r14   0x000000000040110e <+26>:    mov    $0x0,%r12d   0x0000000000401114 <+32>:    mov    %r13,%rbp   0x0000000000401117 <+35>:    mov    0x0(%r13),%eax                  # %r13是%rsp   0x000000000040111b <+39>:    sub    $0x1,%eax                       #   0x000000000040111e <+42>:    cmp    $0x5,%eax   0x0000000000401121 <+45>:    jbe    0x401128 <phase_6+52>           # %rsp<=6   0x0000000000401123 <+47>:    call   0x40143a <explode_bomb>   0x0000000000401128 <+52>:    add    $0x1,%r12d                      # %r12d+=1   0x000000000040112c <+56>:    cmp    $0x6,%r12d                      # 1 ~ 5   0x0000000000401130 <+60>:    je     0x401153 <phase_6+95>           #   0x0000000000401132 <+62>:    mov    %r12d,%ebx   0x0000000000401135 <+65>:    movslq %ebx,%rax   0x0000000000401138 <+68>:    mov    (%rsp,%rax,4),%eax   0x000000000040113b <+71>:    cmp    %eax,0x0(%rbp)                  # 比较第2个到第6个数与第1个数   0x000000000040113e <+74>:    jne    0x401145 <phase_6+81>           # 不能相等   0x0000000000401140 <+76>:    call   0x40143a <explode_bomb>   0x0000000000401145 <+81>:    add    $0x1,%ebx   0x0000000000401148 <+84>:    cmp    $0x5,%ebx--Type <RET> for more, q to quit, c to continue without paging--c   0x000000000040114b <+87>:    jle    0x401135 <phase_6+65>   0x000000000040114d <+89>:    add    $0x4,%r13   0x0000000000401151 <+93>:    jmp    0x401114 <phase_6+32>           # 所有6个数字都<=6,并且互不相等,结束以上循环   0x0000000000401153 <+95>:    lea    0x18(%rsp),%rsi                 # %rsi=%rsp+24   0x0000000000401158 <+100>:   mov    %r14,%rax                       # %r14=%rsp=%rax   0x000000000040115b <+103>:   mov    $0x7,%ecx   0x0000000000401160 <+108>:   mov    %ecx,%edx   0x0000000000401162 <+110>:   sub    (%rax),%edx                     # %edx=7-(%rsp第1个整数)   0x0000000000401164 <+112>:   mov    %edx,(%rax)                     # 替换   0x0000000000401166 <+114>:   add    $0x4,%rax                       # 下一个整数   0x000000000040116a <+118>:   cmp    %rsi,%rax   0x000000000040116d <+121>:   jne    0x401160 <phase_6+108>          # 对6个整数都这样操作   0x000000000040116f <+123>:   mov    $0x0,%esi   0x0000000000401174 <+128>:   jmp    0x401197 <phase_6+163>   0x0000000000401176 <+130>:   mov    0x8(%rdx),%rdx                 # %rdx=(%rdx+8) 0x6032d0这是一个链表   0x000000000040117a <+134>:   add    $0x1,%eax                      # %eax刚到这里时是1,现在加1是2   0x000000000040117d <+137>:   cmp    %ecx,%eax                      # 比较%rax和   0x000000000040117f <+139>:   jne    0x401176 <phase_6+130>   0x0000000000401181 <+141>:   jmp    0x401188 <phase_6+148>   0x0000000000401183 <+143>:   mov    $0x6032d0,%edx   0x0000000000401188 <+148>:   mov    %rdx,0x20(%rsp,%rsi,2)         # (%rsp+32/40/...)=0x6032d0   0x000000000040118d <+153>:   add    $0x4,%rsi   0x0000000000401191 <+157>:   cmp    $0x18,%rsi                     # 6次操作   0x0000000000401195 <+161>:   je     0x4011ab <phase_6+183>         # 6次操作   0x0000000000401197 <+163>:   mov    (%rsp,%rsi,1),%ecx            # 下一个整数   0x000000000040119a <+166>:   cmp    $0x1,%ecx   0x000000000040119d <+169>:   jle    0x401183 <phase_6+143>        # 如果一个整数是1,安排链表头指针   0x000000000040119f <+171>:   mov    $0x1,%eax   0x00000000004011a4 <+176>:   mov    $0x6032d0,%edx   0x00000000004011a9 <+181>:   jmp    0x401176 <phase_6+130>        # 我算是看明白了,整数是多少,对应位置就是指向链表第几个元素的地址   0x00000000004011ab <+183>:   mov    0x20(%rsp),%rbx              # %rbx = 链表[第1个整数]的地址   0x00000000004011b0 <+188>:   lea    0x28(%rsp),%rax              # %rax= 链表[第二个整数]的地址的地址   0x00000000004011b5 <+193>:   lea    0x50(%rsp),%rsi              # %rsi = 链表[最后一个整数]的地址的地址   0x00000000004011ba <+198>:   mov    %rbx,%rcx                    # %rcx = 链表[第一个整数]的地址   0x00000000004011bd <+201>:   mov    (%rax),%rdx                  # %rdx = 链表[第二个整数]的地址   0x00000000004011c0 <+204>:   mov    %rdx,0x8(%rcx)               #   0x00000000004011c4 <+208>:   add    $0x8,%rax   0x00000000004011c8 <+212>:   cmp    %rsi,%rax   0x00000000004011cb <+215>:   je     0x4011d2 <phase_6+222>   0x00000000004011cd <+217>:   mov    %rdx,%rcx   0x00000000004011d0 <+220>:   jmp    0x4011bd <phase_6+201>      # 重新排列了这个链表   0x00000000004011d2 <+222>:   movq   $0x0,0x8(%rdx)              # 尾指针设为0   0x00000000004011da <+230>:   mov    $0x5,%ebp                   #   0x00000000004011df <+235>:   mov    0x8(%rbx),%rax   0x00000000004011e3 <+239>:   mov    (%rax),%eax   0x00000000004011e5 <+241>:   cmp    %eax,(%rbx)                 # 链表[第1个整数]>=链表[第2个整数]   0x00000000004011e7 <+243>:   jge    0x4011ee <phase_6+250>   0x00000000004011e9 <+245>:   call   0x40143a <explode_bomb>   0x00000000004011ee <+250>:   mov    0x8(%rbx),%rbx              #   0x00000000004011f2 <+254>:   sub    $0x1,%ebp   0x00000000004011f5 <+257>:   jne    0x4011df <phase_6+235>      # 要求链表降序排列   0x00000000004011f7 <+259>:   add    $0x50,%rsp   0x00000000004011fb <+263>:   pop    %rbx   0x00000000004011fc <+264>:   pop    %rbp   0x00000000004011fd <+265>:   pop    %r12   0x00000000004011ff <+267>:   pop    %r13   0x0000000000401201 <+269>:   pop    %r14   0x0000000000401203 <+271>:   retEnd of assembler dump." data-copied=Copied!><div></div></button></div></figure></div><p>这么啊,太BT了www 哇塞,这些代码虽然很长,但是拆分开来不是很难.逻辑是获取6个输入,要求大于0小于7并且互不相同.依次去内存中一个创建好的链表中寻找对应序列的元素存取在栈上对应的位置(例如第2个输入是3,那么在栈的第2个指针位置放链表第3个元素的指针,此时%rsp+i*8就是”指针的指针”,这里最绕).接着修改链表使其重新排列.最后要求新链表降序排列即可. 我们打印链表(指针部分)</p><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>x</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/8x</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0x6032d8</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span style=--0:#B392F0>0x6032d8</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;node1+8>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#79B8FF>0xe0</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x32</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x60</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>3</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>x</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/8x</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0x6032e8</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>4</div></div><div class=code><span style=--0:#B392F0>0x6032e8</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;node2+8>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#79B8FF>0xf0</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x32</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x60</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>5</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>x</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/8x</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0x6032f8</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>6</div></div><div class=code><span style=--0:#B392F0>0x6032f8</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;node3+8>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x33</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x60</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>7</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>x</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/8x</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0x603308</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>8</div></div><div class=code><span style=--0:#B392F0>0x603308</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;node4+8>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#79B8FF>0x10</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x33</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x60</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>9</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>x</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/8x</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0x603318</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>10</div></div><div class=code><span style=--0:#B392F0>0x603318</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;node5+8>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#79B8FF>0x20</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x33</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x60</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>11</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>x</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/8x</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0x603328</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>12</div></div><div class=code><span style=--0:#B392F0>0x603328</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;node6+8>:</span><span style=--0:#E1E4E8>     </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="(gdb) x /8x 0x6032d80x6032d8 <node1+8>:     0xe0    0x32    0x60    0x00    0x00    0x00    0x00    0x00(gdb) x /8x 0x6032e80x6032e8 <node2+8>:     0xf0    0x32    0x60    0x00    0x00    0x00    0x00    0x00(gdb) x /8x 0x6032f80x6032f8 <node3+8>:     0x00    0x33    0x60    0x00    0x00    0x00    0x00    0x00(gdb) x /8x 0x6033080x603308 <node4+8>:     0x10    0x33    0x60    0x00    0x00    0x00    0x00    0x00(gdb) x /8x 0x6033180x603318 <node5+8>:     0x20    0x33    0x60    0x00    0x00    0x00    0x00    0x00(gdb) x /8x 0x6033280x603328 <node6+8>:     0x00    0x00    0x00    0x00    0x00    0x00    0x00    0x00" data-copied=Copied!><div></div></button></div></figure></div><p>(数据部分)</p><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>x</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/8x</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0x6032d0</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span style=--0:#B392F0>0x6032d0</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;node1>:</span><span style=--0:#E1E4E8>       </span><span style=--0:#79B8FF>0x4c</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x01</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x01</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>3</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>x</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/8x</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0x6032e0</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>4</div></div><div class=code><span style=--0:#B392F0>0x6032e0</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;node2>:</span><span style=--0:#E1E4E8>       </span><span style=--0:#79B8FF>0xa8</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x02</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>5</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>x</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/8x</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0x6032f0</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>6</div></div><div class=code><span style=--0:#B392F0>0x6032f0</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;node3>:</span><span style=--0:#E1E4E8>       </span><span style=--0:#79B8FF>0x9c</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x03</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x03</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>7</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>x</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/8x</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0x603300</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>8</div></div><div class=code><span style=--0:#B392F0>0x603300</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;node4>:</span><span style=--0:#E1E4E8>       </span><span style=--0:#79B8FF>0xb3</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x02</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x04</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>9</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>x</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/8x</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0x603310</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>10</div></div><div class=code><span style=--0:#B392F0>0x603310</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;node5>:</span><span style=--0:#E1E4E8>       </span><span style=--0:#79B8FF>0xdd</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x01</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x05</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>11</div></div><div class=code><span style=--0:#E1E4E8>(</span><span style=--0:#B392F0>gdb</span><span style=--0:#E1E4E8>) </span><span style=--0:#B392F0>x</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>/8x</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0x603320</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>12</div></div><div class=code><span style=--0:#B392F0>0x603320</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>&#x3C;node6>:</span><span style=--0:#E1E4E8>       </span><span style=--0:#79B8FF>0xbb</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x01</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x06</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span><span style=--0:#E1E4E8>    </span><span style=--0:#79B8FF>0x00</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="(gdb) x /8x 0x6032d00x6032d0 <node1>:       0x4c    0x01    0x00    0x00    0x01    0x00    0x00    0x00(gdb) x /8x 0x6032e00x6032e0 <node2>:       0xa8    0x00    0x00    0x00    0x02    0x00    0x00    0x00(gdb) x /8x 0x6032f00x6032f0 <node3>:       0x9c    0x03    0x00    0x00    0x03    0x00    0x00    0x00(gdb) x /8x 0x6033000x603300 <node4>:       0xb3    0x02    0x00    0x00    0x04    0x00    0x00    0x00(gdb) x /8x 0x6033100x603310 <node5>:       0xdd    0x01    0x00    0x00    0x05    0x00    0x00    0x00(gdb) x /8x 0x6033200x603320 <node6>:       0xbb    0x01    0x00    0x00    0x06    0x00    0x00    0x00" data-copied=Copied!><div></div></button></div></figure></div><p>列表如下:</p><table><thead><tr><th>index</th><th>number</th></tr></thead><tbody><tr><td>1</td><td>0x14c</td></tr><tr><td>2</td><td>0x0a8</td></tr><tr><td>3</td><td>0x39c</td></tr><tr><td>4</td><td>0x2b3</td></tr><tr><td>5</td><td>0x1dd</td></tr><tr><td>6</td><td>0x1bb</td></tr><tr><td>降序排列的顺序为3->4->5->6->1->2.</td><td></td></tr><tr><td>差点忘了,代码中曾经用7减去输入的数,所以最后的答案就是 <code>4 3 2 1 6 5</code> !</td><td></td></tr></tbody></table><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#B392F0>kim@MyDell:/mnt/e/Documents/C/CSAPP/bomb$</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>cat</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>answer</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>2</div></div><div class=code><span style=--0:#B392F0>Border</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>relations</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>with</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>Canada</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>have</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>never</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>been</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>better.</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>3</div></div><div class=code><span style=--0:#B392F0>1</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>2</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>4</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>8</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>16</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>32</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>4</div></div><div class=code><span style=--0:#B392F0>3</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>256</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>5</div></div><div class=code><span style=--0:#B392F0>0</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>0</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>6</div></div><div class=code><span style=--0:#B392F0>IONEFG</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>7</div></div><div class=code><span style=--0:#B392F0>4</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>3</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>2</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>1</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>6</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>5</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>8</div></div><div class=code><span style=--0:#B392F0>kim@MyDell:/mnt/e/Documents/C/CSAPP/bomb$</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>./bomb</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>answer</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>9</div></div><div class=code><span style=--0:#B392F0>Welcome</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>to</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>my</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>fiendish</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>little</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>bomb.</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>You</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>have</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>6</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>phases</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>with</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>10</div></div><div class=code><span style=--0:#79B8FF>which</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>to</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>blow</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>yourself</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>up.</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>Have</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>a</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>nice</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>day!</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>11</div></div><div class=code><span style=--0:#B392F0>Phase</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>1</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>defused.</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>How</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>about</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>the</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>next</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>one?</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>12</div></div><div class=code><span style=--0:#B392F0>That</span><span style=--0:#B392F0>'s number 2.  Keep going!</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>13</div></div><div class=code><span style=--0:#B392F0>Halfway there!</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>14</div></div><div class=code><span style=--0:#B392F0>So you got that one.  Try this one.</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>15</div></div><div class=code><span style=--0:#B392F0>Good work!  On to the next...</span></div></div><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>16</div></div><div class=code><span style=--0:#B392F0>Congratulations! You'</span><span style=--0:#B392F0>ve</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>defused</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>the</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>bomb!</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="kim@MyDell:/mnt/e/Documents/C/CSAPP/bomb$ cat answerBorder relations with Canada have never been better.1 2 4 8 16 323 2560 0IONEFG4 3 2 1 6 5kim@MyDell:/mnt/e/Documents/C/CSAPP/bomb$ ./bomb answerWelcome to my fiendish little bomb. You have 6 phases withwhich to blow yourself up. Have a nice day!Phase 1 defused. How about the next one?That&#x27;s number 2.  Keep going!Halfway there!So you got that one.  Try this one.Good work!  On to the next...Congratulations! You&#x27;ve defused the bomb!" data-copied=Copied!><div></div></button></div></figure></div><p>拿下!</p><h1 id=隐藏彩蛋>隐藏彩蛋</h1><p>看到别人的解答发现原来bomb还有彩蛋,并没有在main函数中使用.对于我这样用gdb见招拆招的选手当然没有想到.只有把整个可执行文件反汇编才能看到,比如使用objdump重定向输出</p><div class=expressive-code><figure class="frame is-terminal"><figcaption class=header><span class=title></span><span class=sr-only>Terminal window</span></figcaption><pre data-language=shell><code><div class=ec-line><div class=gutter><div class=ln aria-hidden=true>1</div></div><div class=code><span style=--0:#B392F0>objdump</span><span style=--0:#E1E4E8> </span><span style=--0:#79B8FF>-d</span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>bomb</span><span style=--0:#E1E4E8> </span><span style=--0:#F97583>>></span><span style=--0:#E1E4E8> </span><span style=--0:#9ECBFF>bomb.s</span></div></div></code></pre><div class=copy><button title="Copy to clipboard" data-code="objdump -d bomb >> bomb.s" data-copied=Copied!><div></div></button></div></figure></div><h1 id=感受>感受</h1><h1 id=参考资料补充学习>参考资料/补充学习</h1><h2 id=别人的解法>别人的解法</h2><p><a href=https://zhuanlan.zhihu.com/p/451623574 rel=nofollow>手把手教你拆解 CSAPP 的 炸弹实验室 BombLab - 知乎<span>↗</span></a> <a href=https://blog.csdn.net/weixin_52259822/article/details/124219469 rel=nofollow>CSAPP：BombLab 详细解析_csapp bomblab-CSDN博客<span>↗</span></a></p><h2 id=gdb调试>GDB调试</h2><hr data-astro-cid-zux26muy><div class="container p-0" data-astro-cid-zux26muy><div class="text-sm italic mb-2 text-base-content/60 text-right" data-astro-cid-zux26muy><svg height=1em width=1em data-icon=ri:heart-line class="h-4 w-4 align-text-bottom inline-block text-error" data-astro-cid-zux26muy=true><symbol id=ai:ri:heart-line viewBox="0 0 24 24"><path d="M12.001 4.529a6 6 0 0 1 8.242.228a6 6 0 0 1 .236 8.236l-8.48 8.492l-8.478-8.492a6 6 0 0 1 8.48-8.464m6.826 1.641a4 4 0 0 0-5.49-.153l-1.335 1.198l-1.336-1.197a4 4 0 0 0-5.686 5.605L12 18.654l7.02-7.03a4 4 0 0 0-.193-5.454" fill=currentColor /></symbol><use href=#ai:ri:heart-line></use></svg> Thanks for reading!</div><div class="bg-base-200 card overflow-visible" data-astro-cid-zux26muy><div class="relative p-4 card-body lg:p-8 sm:p-6" data-astro-cid-zux26muy><div class="-top-8 absolute left-8" data-astro-cid-zux26muy><div class="flex items-center justify-center bg-primary h-16 rounded-full shadow-lg w-16" data-astro-cid-zux26muy><svg height=1em width=1em data-icon=ri:creative-commons-line class="h-10 text-primary-content w-10" data-astro-cid-zux26muy=true><symbol id=ai:ri:creative-commons-line viewBox="0 0 24 24"><path d="M9 8c1.104 0 2.105.448 2.829 1.173l-1.414 1.413a2 2 0 1 0 0 2.828l1.413 1.414A4.001 4.001 0 0 1 5 12c0-2.208 1.792-4 4-4m9.829 1.173A4.001 4.001 0 0 0 12 12a4.001 4.001 0 0 0 6.828 2.828l-1.414-1.414a2 2 0 1 1 0-2.828zM2 12C2 6.477 6.477 2 12 2s10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12m10-8a8 8 0 1 0 0 16a8 8 0 0 0 0-16" fill=currentColor /></symbol><use href=#ai:ri:creative-commons-line></use></svg></div></div><div class=space-y-4 data-astro-cid-zux26muy><h3 class="sm:text-xl font-bold text-lg lg:text-2xl" data-astro-cid-zux26muy>Bomblab</h3><div class="flex flex-wrap gap-2 opacity-75 sm:gap-4 sm:text-sm text-xs" data-astro-cid-zux26muy><span class="flex items-center gap-1" data-astro-cid-zux26muy><svg height=1em width=1em data-icon=lucide:calendar class="h-4 w-4" viewBox="0 0 24 24" data-astro-cid-zux26muy=true><use href=#ai:lucide:calendar></use></svg> Sun Jan 19 2025</span><div class="flex items-center gap-1" data-astro-cid-zux26muy><svg height=1em width=1em data-icon=lucide:book-open class="h-4 w-4" viewBox="0 0 24 24" data-astro-cid-zux26muy=true><use href=#ai:lucide:book-open></use></svg> <span data-astro-cid-zux26muy>4946 words · 33 minutes</span></div><a href=https://tankimzeg.top/csapp/bomblab class="flex items-center gap-1 hover:text-primary transition-colors" data-astro-cid-zux26muy><svg height=1em width=1em data-icon=ri:links-line class="h-4 w-4" data-astro-cid-zux26muy=true><symbol id=ai:ri:links-line viewBox="0 0 24 24"><path d="m13.06 8.111l1.415 1.414a7 7 0 0 1 0 9.9l-.354.353a7 7 0 1 1-9.9-9.9l1.415 1.415a5 5 0 1 0 7.071 7.071l.354-.354a5 5 0 0 0 0-7.07l-1.415-1.415zm6.718 6.01l-1.414-1.414a5 5 0 0 0-7.071-7.07l-.354.353a5 5 0 0 0 0 7.07l1.415 1.415l-1.415 1.414l-1.414-1.414a7 7 0 0 1 0-9.9l.354-.353a7 7 0 1 1 9.9 9.9" fill=currentColor /></symbol><use href=#ai:ri:links-line></use></svg></a></div><div class=mt-4 data-astro-cid-zux26muy><div class="flex items-center flex-wrap gap-2"><a href=/blog/category/tech class="btn btn-xs btn-category"><svg height=1em width=1em data-icon=lucide:folder class="h-4 w-4" viewBox="0 0 24 24"><use href=#ai:lucide:folder></use></svg> <span>tech</span> </a><a href=/blog/tag/csapp class="btn btn-xs btn-tag"><svg height=1em width=1em data-icon=lucide:tag class="h-4 w-4" viewBox="0 0 24 24"><use href=#ai:lucide:tag></use></svg> <span>csapp</span> </a><a href=/blog/tag/csapplab class="btn btn-xs btn-tag"><svg height=1em width=1em data-icon=lucide:tag class="h-4 w-4" viewBox="0 0 24 24"><use href=#ai:lucide:tag></use></svg> <span>csapplab</span></a></div><hr data-astro-cid-zux26muy class=my-4><p class="text-sm opacity-75" data-astro-cid-zux26muy></p>© TanKimzeg | <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed class="hover:text-primary transition-colors" target=_blank data-astro-cid-zux26muy rel="noopener noreferrer">CC BY-NC-SA 4.0</a></div></div><div class="flex justify-end mt-4" data-astro-cid-zux26muy><button class="btn btn-outline btn-primary" data-astro-cid-zux26muy onclick=share_modal.showModal()>Share <svg height=1em width=1em data-icon=ri:share-line class="h-5 w-5" data-astro-cid-zux26muy=true><symbol id=ai:ri:share-line viewBox="0 0 24 24"><path d="m13.12 17.023l-4.199-2.29a4 4 0 1 1 0-5.465l4.2-2.29a4 4 0 1 1 .958 1.755l-4.2 2.29a4 4 0 0 1 0 1.954l4.2 2.29a4 4 0 1 1-.959 1.755M6 14a2 2 0 1 0 0-4a2 2 0 0 0 0 4m11-6a2 2 0 1 0 0-4a2 2 0 0 0 0 4m0 12a2 2 0 1 0 0-4a2 2 0 0 0 0 4" fill=currentColor /></symbol><use href=#ai:ri:share-line></use></svg></button></div></div></div><dialog class="modal modal-bottom sm:modal-middle" id=share_modal data-astro-cid-zux26muy><div class="modal-box max-w-2xl rounded-none sm:rounded-xl" data-astro-cid-zux26muy><h3 class="mb-6 font-bold sm:text-xl text-center text-lg" data-astro-cid-zux26muy>Share this article</h3><div class="flex justify-center flex-wrap gap-4" data-astro-cid-zux26muy><a href="https://twitter.com/intent/tweet/?text=Bomblab&url=https://tankimzeg.top/csapp/bomblab" class="btn btn-circle hover:scale-110 btn-lg transition-transform bg-black hover:bg-gray-800" target=_blank data-astro-cid-zux26muy rel="noopener noreferrer" title="X (Twitter)"><span class=sr-only data-astro-cid-zux26muy>X (Twitter)</span> <svg height=1em width=1em data-icon=ri:twitter-x-line class="h-6 text-white w-6" data-astro-cid-zux26muy=true><symbol id=ai:ri:twitter-x-line viewBox="0 0 24 24"><path d="M10.488 14.651L15.25 21h7l-7.858-10.478L20.93 3h-2.65l-5.117 5.886L8.75 3h-7l7.51 10.015L2.32 21h2.65zM16.25 19L5.75 5h2l10.5 14z" fill=currentColor /></symbol><use href=#ai:ri:twitter-x-line></use></svg> </a><a href="https://telegram.me/share/url?text=Bomblab&url=https://tankimzeg.top/csapp/bomblab" class="btn btn-circle hover:scale-110 btn-lg transition-transform bg-[#26a5e4] hover:bg-[#1e96d1]" target=_blank data-astro-cid-zux26muy rel="noopener noreferrer" title=Telegram><span class=sr-only data-astro-cid-zux26muy>Telegram</span> <svg height=1em width=1em data-icon=ri:telegram-line class="h-6 text-white w-6" data-astro-cid-zux26muy=true><symbol id=ai:ri:telegram-line viewBox="0 0 24 24"><path d="M20 12a8 8 0 1 1-16 0a8 8 0 0 1 16 0m-8 10c5.523 0 10-4.477 10-10S17.523 2 12 2S2 6.477 2 12s4.477 10 10 10m.358-12.618q-1.458.607-5.831 2.513q-.711.282-.744.552c-.038.304.343.424.862.587l.218.07c.51.166 1.198.36 1.555.368q.486.01 1.084-.4q4.086-2.76 4.218-2.789c.063-.014.149-.032.207.02c.059.052.053.15.047.177c-.038.161-1.534 1.552-2.308 2.271q-.344.324-.683.653c-.474.457-.83.8.02 1.36c.861.568 1.73 1.134 2.57 1.733c.414.296.786.56 1.246.519c.267-.025.543-.276.683-1.026c.332-1.77.983-5.608 1.133-7.19a1.8 1.8 0 0 0-.017-.393a.42.42 0 0 0-.142-.27c-.12-.098-.305-.118-.387-.117c-.376.007-.953.207-3.73 1.362" fill=currentColor /></symbol><use href=#ai:ri:telegram-line></use></svg> </a><a href="https://reddit.com/submit/?url=https://tankimzeg.top/csapp/bomblab&title=Bomblab" class="btn btn-circle hover:scale-110 btn-lg transition-transform bg-[#ff4500] hover:bg-[#e63e00]" target=_blank data-astro-cid-zux26muy rel="noopener noreferrer" title=Reddit><span class=sr-only data-astro-cid-zux26muy>Reddit</span> <svg height=1em width=1em data-icon=ri:reddit-line class="h-6 text-white w-6" data-astro-cid-zux26muy=true><symbol id=ai:ri:reddit-line viewBox="0 0 24 24"><path d="m11.053 7.815l.751-3.536a2 2 0 0 1 2.372-1.54l3.196.68a2 2 0 1 1-.415 1.956l-3.197-.68l-.666 3.135c1.785.137 3.558.73 5.164 1.7A3.192 3.192 0 0 1 23 12.203v.021a3.2 3.2 0 0 1-1.207 2.55l-.008.123c0 3.998-4.45 7.03-9.799 7.03c-5.333 0-9.708-3.024-9.705-6.953l-.01-.181a3.193 3.193 0 0 1 3.454-5.35a11.45 11.45 0 0 1 5.329-1.628m9.285 5.526a1.19 1.19 0 0 0 .662-1.075a1.192 1.192 0 0 0-2.016-.806l-.585.56l-.67-.455c-1.615-1.098-3.452-1.725-5.23-1.764h-1.006c-1.875.028-3.652.6-5.237 1.675l-.664.45l-.583-.55a1.192 1.192 0 1 0-1.315 1.952l.633.29l-.053.695a4 4 0 0 0 .003.584c0 2.71 3.356 5.03 7.708 5.03c4.371 0 7.799-2.336 7.802-5.107a3 3 0 0 0 0-.507l-.052-.672zM6.951 13.5a1.5 1.5 0 1 1 3 0a1.5 1.5 0 0 1-3 0m7 0a1.5 1.5 0 1 1 3 0a1.5 1.5 0 0 1-3 0m-1.985 5.103c-1.397 0-2.766-.37-3.881-1.21a.424.424 0 0 1 .597-.597c.945.693 2.123.99 3.269.99s2.33-.275 3.284-.959a.44.44 0 0 1 .732.206a.47.47 0 0 1-.12.423c-.683.797-2.483 1.147-3.88 1.147" fill=currentColor /></symbol><use href=#ai:ri:reddit-line></use></svg> </a><a href="https://facebook.com/sharer/sharer.php?u=https://tankimzeg.top/csapp/bomblab" class="btn btn-circle hover:scale-110 btn-lg transition-transform bg-[#0866ff] hover:bg-[#0755d6]" target=_blank data-astro-cid-zux26muy rel="noopener noreferrer" title=Facebook><span class=sr-only data-astro-cid-zux26muy>Facebook</span> <svg height=1em width=1em data-icon=ri:facebook-circle-line class="h-6 text-white w-6" data-astro-cid-zux26muy=true><symbol id=ai:ri:facebook-circle-line viewBox="0 0 24 24"><path d="M13.001 19.938a8.001 8.001 0 0 0-1-15.938a8 8 0 0 0-1 15.938V14h-2v-2h2v-1.654c0-1.337.14-1.822.4-2.311A2.73 2.73 0 0 1 12.537 6.9c.382-.205.857-.328 1.687-.381q.494-.032 1.278.08v1.9h-.5c-.917 0-1.296.043-1.522.164a.73.73 0 0 0-.314.314c-.12.226-.164.45-.164 1.368V12h2.5l-.5 2h-2zm-1 2.062c-5.523 0-10-4.477-10-10s4.477-10 10-10s10 4.477 10 10s-4.477 10-10 10" fill=currentColor /></symbol><use href=#ai:ri:facebook-circle-line></use></svg> </a><a href="mailto:?subject=Bomblab&#38;body=https://tankimzeg.top/csapp/bomblab" class="btn btn-circle hover:scale-110 btn-lg transition-transform bg-gray-600 hover:bg-gray-700" target=_blank data-astro-cid-zux26muy rel="noopener noreferrer" title=Email><span class=sr-only data-astro-cid-zux26muy>Email</span> <svg height=1em width=1em data-icon=ri:mail-line class="h-6 text-white w-6" data-astro-cid-zux26muy=true><symbol id=ai:ri:mail-line viewBox="0 0 24 24"><path d="M3 3h18a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1m17 4.238l-7.928 7.1L4 7.216V19h16zM4.511 5l7.55 6.662L19.502 5z" fill=currentColor /></symbol><use href=#ai:ri:mail-line></use></svg></a></div><div class=modal-action data-astro-cid-zux26muy><form method=dialog data-astro-cid-zux26muy><button class="btn btn-ghost hover:scale-105 transition-transform" data-astro-cid-zux26muy>Close</button></form></div></div><form method=dialog class=modal-backdrop data-astro-cid-zux26muy><button data-astro-cid-zux26muy>Close</button></form></dialog></div></div></div></div></div><script type=module>document.addEventListener("astro:page-load",(()=>{const t=document.querySelectorAll(".dropdown label"),e=document.querySelectorAll(".dropdown-content");t.forEach(((t,a)=>{t.addEventListener("click",(()=>{const t=e[a];"closed"===t.getAttribute("data-state")?(t.setAttribute("data-state","open"),t.classList.add("scale-100","opacity-100"),t.classList.remove("scale-90","opacity-0")):(t.setAttribute("data-state","closed"),t.classList.add("scale-90","opacity-0"),t.classList.remove("scale-100","opacity-100"))}))}))}))</script></div><footer class="bg-base-100 shadow-lg rounded-xl footer p-10"><aside><svg height=50 width=50 class=fill-current viewBox="0 0 24 24" clip-rule=evenodd fill-rule=evenodd xmlns=http://www.w3.org/2000/svg><path d="M22.672 15.226l-2.432.811.841 2.515c.33 1.019-.209 2.127-1.23 2.456-1.15.325-2.148-.321-2.463-1.226l-.84-2.518-5.013 1.677.84 2.517c.391 1.203-.434 2.542-1.831 2.542-.88 0-1.601-.564-1.86-1.314l-.842-2.516-2.431.809c-1.135.328-2.145-.317-2.463-1.229-.329-1.018.211-2.127 1.231-2.456l2.432-.809-1.621-4.823-2.432.808c-1.355.384-2.558-.59-2.558-1.839 0-.817.509-1.582 1.327-1.846l2.433-.809-.842-2.515c-.33-1.02.211-2.129 1.232-2.458 1.02-.329 2.13.209 2.461 1.229l.842 2.515 5.011-1.677-.839-2.517c-.403-1.238.484-2.553 1.843-2.553.819 0 1.585.509 1.85 1.326l.841 2.517 2.431-.81c1.02-.33 2.131.211 2.461 1.229.332 1.018-.21 2.126-1.23 2.456l-2.433.809 1.622 4.823 2.433-.809c1.242-.401 2.557.484 2.557 1.838 0 .819-.51 1.583-1.328 1.847m-8.992-6.428l-5.01 1.675 1.619 4.828 5.011-1.674-1.62-4.829z"></path></svg><p>Powered by <a href=https://github.com/EveSunMaple/Frosti class=font-bold target=_blank>Frosti Template</a><br>Copyright © <a href=https://tankimzeg.top class=font-bold target=_blank>TanKimzeg</a> 2025 - All right reserved</p></aside><nav><span class=footer-title>Social</span><div class="gap-4 grid grid-flow-col"><div class=tooltip data-tip=Github><a href=https://github.com/TanKimzeg aria-label=Github tabindex=0><svg height=1em width=1em data-icon=ri:github-line class="md:text-xl text-2xl"><symbol id=ai:ri:github-line viewBox="0 0 24 24"><path d="M5.884 18.653c-.3-.2-.558-.455-.86-.816a51 51 0 0 1-.466-.579c-.463-.575-.755-.841-1.056-.95a1 1 0 1 1 .675-1.882c.752.27 1.261.735 1.947 1.588c-.094-.117.34.427.433.539c.19.227.33.365.44.438c.204.137.588.196 1.15.14c.024-.382.094-.753.202-1.095c-2.968-.726-4.648-2.64-4.648-6.396c0-1.24.37-2.356 1.058-3.292c-.218-.894-.185-1.975.302-3.192a1 1 0 0 1 .63-.582c.081-.024.127-.035.208-.047c.803-.124 1.937.17 3.415 1.096a11.7 11.7 0 0 1 2.687-.308c.912 0 1.819.104 2.684.308c1.477-.933 2.614-1.227 3.422-1.096q.128.02.218.05a1 1 0 0 1 .616.58c.487 1.216.52 2.296.302 3.19c.691.936 1.058 2.045 1.058 3.293c0 3.757-1.674 5.665-4.642 6.392c.125.415.19.878.19 1.38c0 .665-.002 1.299-.007 2.01c0 .19-.002.394-.005.706a1 1 0 0 1-.018 1.958c-1.14.227-1.984-.532-1.984-1.525l.002-.447l.005-.705c.005-.707.008-1.337.008-1.997c0-.697-.184-1.152-.426-1.361c-.661-.57-.326-1.654.541-1.751c2.966-.333 4.336-1.482 4.336-4.66c0-.955-.312-1.744-.913-2.404A1 1 0 0 1 17.2 6.19c.166-.414.236-.957.095-1.614l-.01.003c-.491.139-1.11.44-1.858.949a1 1 0 0 1-.833.135a9.6 9.6 0 0 0-2.592-.349c-.89 0-1.772.118-2.592.35a1 1 0 0 1-.829-.134c-.753-.507-1.374-.807-1.87-.947c-.143.653-.072 1.194.093 1.607a1 1 0 0 1-.189 1.045c-.597.655-.913 1.458-.913 2.404c0 3.172 1.371 4.328 4.322 4.66c.865.097 1.202 1.177.545 1.748c-.193.168-.43.732-.43 1.364v3.15c0 .985-.834 1.725-1.96 1.528a1 1 0 0 1-.04-1.962v-.99c-.91.061-1.661-.088-2.254-.485" fill=currentColor /></symbol><use href=#ai:ri:github-line></use></svg></a></div><div class=tooltip data-tip=Zhihu><a href=https://www.zhihu.com/people/Dalekov aria-label=Zhihu tabindex=0><svg height=1em width=1em data-icon=ri:zhihu-line class="md:text-xl text-2xl"><symbol id=ai:ri:zhihu-line viewBox="0 0 24 24"><path d="m12.345 17.963l-1.688 1.074l-2.132-3.35c-.44 1.402-1.171 2.665-2.138 3.825c-.402.483-.82.918-1.301 1.376c-.155.146-.775.716-.878.82l-1.414-1.415c.139-.139.787-.735.914-.856c.43-.408.796-.79 1.143-1.205C6.117 16.712 6.88 15.02 6.988 13H3v-2h4V7h-.868c-.689 1.266-1.558 2.222-2.618 2.858L2.486 8.143c1.396-.838 2.426-2.603 3.039-5.36l1.952.434q-.21.95-.489 1.783h4.513v2H9v4h2.5v2H9.186zm3.838-.07L17.3 17h1.702V7h-4v10h.736zM13.001 5h8v14h-3l-2.5 2l-1-2H13z" fill=currentColor /></symbol><use href=#ai:ri:zhihu-line></use></svg></a></div><div class=tooltip data-tip=BiliBili><a href=https://space.bilibili.com/3493121543375815 aria-label=BiliBili tabindex=0><svg height=1em width=1em data-icon=ri:bilibili-line class="md:text-xl text-2xl"><symbol id=ai:ri:bilibili-line viewBox="0 0 24 24"><path d="M7.172 2.757L10.414 6h3.171l3.243-3.242a1 1 0 1 1 1.415 1.415L16.414 6H18.5A3.5 3.5 0 0 1 22 9.5v8a3.5 3.5 0 0 1-3.5 3.5h-13A3.5 3.5 0 0 1 2 17.5v-8A3.5 3.5 0 0 1 5.5 6h2.085L5.757 4.171a1 1 0 0 1 1.415-1.415M18.5 8h-13a1.5 1.5 0 0 0-1.493 1.356L4 9.5v8a1.5 1.5 0 0 0 1.356 1.493L5.5 19h13a1.5 1.5 0 0 0 1.493-1.355L20 17.5v-8A1.5 1.5 0 0 0 18.5 8M8 11a1 1 0 0 1 1 1v2a1 1 0 1 1-2 0v-2a1 1 0 0 1 1-1m8 0a1 1 0 0 1 1 1v2a1 1 0 1 1-2 0v-2a1 1 0 0 1 1-1" fill=currentColor /></symbol><use href=#ai:ri:bilibili-line></use></svg></a></div><div class=tooltip data-tip="RSS Feed"><a href=/rss.xml aria-label="RSS Feed" tabindex=0><svg height=1em width=1em data-icon=ri:rss-line class="md:text-xl text-2xl"><symbol id=ai:ri:rss-line viewBox="0 0 24 24"><path d="M3 17a4 4 0 0 1 4 4H3zm0-7c6.075 0 11 4.925 11 11h-2a9 9 0 0 0-9-9zm0-7c9.941 0 18 8.059 18 18h-2c0-8.837-7.163-16-16-16z" fill=currentColor /></symbol><use href=#ai:ri:rss-line></use></svg></a></div></div></nav></footer></main><aside class="md:top-4 bg-transparent col-span-1 md:order-1 order-2"><div class="relative mb-4"><div class="w-full bg-base-100 shadow-lg rounded-xl"><div class="flex relative flex-col p-4"><div class="flex justify-center p-2"><img decoding=async fetchpriority=auto height=250 loading=eager src=/profile.jpg width=250 alt=Profile class="mask mask-circle"></div><ul class="items-center bg-transparent flex-col hidden lg:items-start m-0 md:flex menu p-0 w-full"><li class="relative w-full group"><a href=/ class="flex items-center rounded-lg hover:bg-base-200 font-bold justify-center lg:justify-start lg:text-xl md:text-3xl p-4 text-center text-xl" target=_self aria-label=Home tabindex=0 id=home><svg height=1em width=1em data-icon=material-symbols:home-outline-rounded viewBox="0 0 24 24"><use href=#ai:material-symbols:home-outline-rounded></use></svg> <span class="hidden lg:inline ml-2">Home</span></a></li><li class="relative w-full group"><a href=/about class="flex items-center rounded-lg hover:bg-base-200 font-bold justify-center lg:justify-start lg:text-xl md:text-3xl p-4 text-center text-xl" target=_self aria-label=About tabindex=0 id=about><svg height=1em width=1em data-icon=material-symbols:info-outline-rounded viewBox="0 0 24 24"><use href=#ai:material-symbols:info-outline-rounded></use></svg> <span class="hidden lg:inline ml-2">About</span></a></li><li class="relative w-full group"><details open class="w-full menu-item" data-submenu-id=blog><summary class="items-center rounded-lg hover:bg-base-200 font-bold justify-center lg:justify-start lg:text-xl md:text-3xl p-4 text-center text-xl"><svg height=1em width=1em data-icon=material-symbols:book-2-outline-rounded viewBox="0 0 24 24"><use href=#ai:material-symbols:book-2-outline-rounded></use></svg> <span class="hidden lg:inline ml-2">Blogs</span></summary><ul class=rounded-lg><li class=relative><a href=/blog class="p-2 hover:bg-base-200 rounded-lg font-bold lg:text-base md:text-2xl menu-item text-base" target=_self aria-label="All blogs" tabindex=0 id=header-all><svg height=1em width=1em data-icon=material-symbols:ink-pen-outline-rounded viewBox="0 0 24 24"><use href=#ai:material-symbols:ink-pen-outline-rounded></use></svg> <span class="hidden lg:inline ml-2">All blogs</span></a></li><li class=relative><a href=/blog/category/tech class="p-2 hover:bg-base-200 rounded-lg font-bold lg:text-base md:text-2xl menu-item text-base" target=_self aria-label="Tech Blogs" tabindex=0 id=header-tech><svg height=1em width=1em data-icon=material-symbols:deployed-code-outline viewBox="0 0 24 24"><use href=#ai:material-symbols:deployed-code-outline></use></svg> <span class="hidden lg:inline ml-2">Tech Blogs</span></a></li><li class=relative><a href=/blog/category/life class="p-2 hover:bg-base-200 rounded-lg font-bold lg:text-base md:text-2xl menu-item text-base" target=_self aria-label="Life Blogs" tabindex=0 id=header-life><svg height=1em width=1em data-icon=material-symbols:earthquake-rounded viewBox="0 0 24 24"><use href=#ai:material-symbols:earthquake-rounded></use></svg> <span class="hidden lg:inline ml-2">Life Blogs</span></a></li></ul></details></li><li class="relative w-full group"><a href=/project class="flex items-center rounded-lg hover:bg-base-200 font-bold justify-center lg:justify-start lg:text-xl md:text-3xl p-4 text-center text-xl" target=_self aria-label=Project tabindex=0 id=project><svg height=1em width=1em data-icon=material-symbols:code-blocks-outline viewBox="0 0 24 24"><use href=#ai:material-symbols:code-blocks-outline></use></svg> <span class="hidden lg:inline ml-2">Project</span></a></li><li class="relative w-full group"><a href=/friend class="flex items-center rounded-lg hover:bg-base-200 font-bold justify-center lg:justify-start lg:text-xl md:text-3xl p-4 text-center text-xl" target=_self aria-label=Friend tabindex=0 id=friend><svg height=1em width=1em data-icon=material-symbols:supervisor-account-outline-rounded viewBox="0 0 24 24"><use href=#ai:material-symbols:supervisor-account-outline-rounded></use></svg> <span class="hidden lg:inline ml-2">Friend</span></a></li></ul><div class="mt-4 border-base-content/20 border-t pt-3"><div class="justify-items-center gap-2 grid grid-cols-4 lg:grid-cols-4 md:grid-cols-2"><div class="tooltip tooltip-bottom" data-tip=Github><a href=https://github.com/TanKimzeg class="btn btn-circle btn-ghost" target=_blank aria-label=Github tabindex=0><svg height=1em width=1em data-icon=ri:github-line class=text-xl viewBox="0 0 24 24"><use href=#ai:ri:github-line></use></svg></a></div><div class="tooltip tooltip-bottom" data-tip=Zhihu><a href=https://www.zhihu.com/people/Dalekov class="btn btn-circle btn-ghost" target=_blank aria-label=Zhihu tabindex=0><svg height=1em width=1em data-icon=ri:zhihu-line class=text-xl viewBox="0 0 24 24"><use href=#ai:ri:zhihu-line></use></svg></a></div><div class="tooltip tooltip-bottom" data-tip=BiliBili><a href=https://space.bilibili.com/3493121543375815 class="btn btn-circle btn-ghost" target=_blank aria-label=BiliBili tabindex=0><svg height=1em width=1em data-icon=ri:bilibili-line class=text-xl viewBox="0 0 24 24"><use href=#ai:ri:bilibili-line></use></svg></a></div><div class="tooltip tooltip-bottom" data-tip="RSS Feed"><a href=https://tankimzeg.top/rss.xml class="btn btn-circle btn-ghost" target=_blank aria-label="RSS Feed" tabindex=0><svg height=1em width=1em data-icon=ri:rss-line class=text-xl viewBox="0 0 24 24"><use href=#ai:ri:rss-line></use></svg></a></div></div></div></div></div></div><div class="relative mb-4"><div class="w-full bg-base-100 shadow-lg rounded-xl"><div class=p-4><form method=get class="relative w-full" action=/blog/search><div class="relative w-full search-container"><input type=text aria-label=Search class="w-full input input-bordered pl-10 pr-16 py-2" name=q placeholder=Search><div class="flex items-center absolute inset-y-0 left-0 pl-3 pointer-events-none"><svg height=1em width=1em data-icon=lucide:search class="h-5 w-5"><symbol id=ai:lucide:search viewBox="0 0 24 24"><g fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2><path d="m21 21l-4.34-4.34"/><circle cx=11 cy=11 r=8 /></g></symbol><use href=#ai:lucide:search></use></svg></div><button class="p-2 -translate-y-1/2 absolute right-2 top-1/2 transform" aria-label=Search type=submit><svg height=1em width=1em data-icon=lucide:arrow-right class="h-4 w-4"><symbol id=ai:lucide:arrow-right viewBox="0 0 24 24"><path d="M5 12h14m-7-7l7 7l-7 7" fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 /></symbol><use href=#ai:lucide:arrow-right></use></svg></button></div></form></div></div><script type=module>document.addEventListener("keydown",(e=>{const t=e.target;if("/"===e.key&&t&&"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName){e.preventDefault();const t=document.querySelector('input[name="q"]');t&&t.focus()}}))</script></div><div class="md:top-4 md:sticky"><div class="w-full bg-base-100 shadow-lg rounded-xl"><div class="toolbar-container p-4"><div class="items-center justify-center flex-wrap gap-4 grid grid-cols-4 lg:grid-cols-4 md:grid-cols-2"><a href=/blog/tags class="btn btn-circle hover:scale-110 bg-base-100 btn-md shadow-sm border-base-content/20" aria-label=Tag title=Tag><svg height=1em width=1em data-icon=lucide:tag class="h-5 w-5"><symbol id=ai:lucide:tag viewBox="0 0 24 24"><g fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2><path d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"/><circle cx=7.5 cy=7.5 r=.5 fill=currentColor /></g></symbol><use href=#ai:lucide:tag></use></svg> </a><a href=/blog/categories class="btn btn-circle hover:scale-110 bg-base-100 btn-md shadow-sm border-base-content/20" aria-label=Category title=Category><svg height=1em width=1em data-icon=lucide:folder class="h-5 w-5"><symbol id=ai:lucide:folder viewBox="0 0 24 24"><path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z" fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 /></symbol><use href=#ai:lucide:folder></use></svg> </a><a href=/blog/archives class="btn btn-circle hover:scale-110 bg-base-100 btn-md shadow-sm border-base-content/20" aria-label=Archives title=Archives><svg height=1em width=1em data-icon=lucide:archive class="h-5 w-5"><symbol id=ai:lucide:archive viewBox="0 0 24 24"><g fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2><rect height=5 rx=1 width=20 x=2 y=3 /><path d="M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8m-10 4h4"/></g></symbol><use href=#ai:lucide:archive></use></svg> </a><button title="Theme Toggle" aria-label="Toggle theme" class="btn btn-circle hover:scale-110 bg-base-100 btn-md shadow-sm md:border-base-content/20 sidebar-theme" data-astro-cid-mjqc4hpp data-theme-toggle id=theme-toggle-0szcl3n17><svg height=1em width=1em data-icon=lucide:sun class="h-5 w-5 theme-toggle-icon sun-icon" viewBox="0 0 24 24" data-astro-cid-mjqc4hpp=true><use href=#ai:lucide:sun></use></svg> <svg height=1em width=1em data-icon=lucide:moon class="h-5 w-5 theme-toggle-icon hidden moon-icon" viewBox="0 0 24 24" data-astro-cid-mjqc4hpp=true><use href=#ai:lucide:moon></use></svg></button><script>!function(){const e="winter",t="dracula",n=(e,t)=>{if(!e)return;const n=e.querySelector(".sun-icon"),d=e.querySelector(".moon-icon");n&&d&&(t?(n.classList.remove("hidden"),d.classList.add("hidden")):(n.classList.add("hidden"),d.classList.remove("hidden")))};document.addEventListener("astro:page-load",(()=>{const d=document.getElementById("theme-toggle-0szcl3n17");if(!d)return;const o=document.documentElement.getAttribute("data-theme");n(d,o===t),d.addEventListener("click",(()=>{const o=document.documentElement.getAttribute("data-theme")===e?t:e;d.classList.add("animate-spin-once"),document.documentElement.setAttribute("data-theme",o);const c=o===t?"dark":"light";document.documentElement.setAttribute("data-theme-type",c),localStorage.setItem("theme",o);document.querySelectorAll("[data-theme-toggle]").forEach((e=>{n(e,o===t)})),setTimeout((()=>{d.classList.remove("animate-spin-once")}),300)}))}))}()</script></div></div></div><button class="btn btn-circle hover:scale-110 bg-base-100 btn-md fixed invisible opacity-0 right-6 shadow-lg transition-all z-50 bottom-6" aria-label="Scroll to top" id=scroll-to-top><svg height=1em width=1em data-icon=material-symbols:arrow-upward-rounded class="h-5 w-5"><symbol id=ai:material-symbols:arrow-upward-rounded viewBox="0 0 24 24"><path d="m11 7.825l-4.9 4.9q-.3.3-.7.288t-.7-.313q-.275-.3-.288-.7t.288-.7l6.6-6.6q.15-.15.325-.212T12 4.425t.375.063t.325.212l6.6 6.6q.275.275.275.688t-.275.712q-.3.3-.712.3t-.713-.3L13 7.825V19q0 .425-.288.713T12 20t-.712-.288T11 19z" fill=currentColor /></symbol><use href=#ai:material-symbols:arrow-upward-rounded></use></svg></button><script type=module>document.addEventListener("astro:page-load",(()=>{const i=document.getElementById("scroll-to-top");if(i){const s=()=>{window.scrollY>300?(i.classList.remove("opacity-0","invisible"),i.classList.add("opacity-100","visible")):(i.classList.remove("opacity-100","visible"),i.classList.add("opacity-0","invisible"))};s(),window.addEventListener("scroll",s),i.addEventListener("click",(()=>{window.scrollTo({top:0,behavior:"smooth"})}))}}))</script><div class="mt-4 md:max-h-[calc(100vh-2rem)] z-10" id=toc-container data-astro-cid-ydxbofl4><div class="w-full bg-base-100 shadow-lg rounded-xl"><div class=p-4 data-astro-cid-ydxbofl4><nav class="relative max-h-[calc(100vh-200px)] overflow-y-auto scrollbar-none toc-nav" data-astro-cid-ydxbofl4><div class="bg-primary/10 absolute opacity-0 pointer-events-none rounded-lg shadow-sm z-0" id=active-indicator data-astro-cid-ydxbofl4></div><ul class="relative space-y-0 z-10" data-astro-cid-ydxbofl4><li data-astro-cid-ydxbofl4><a href=#heading-0 class="flex items-center rounded-lg px-2 py-2 relative toc-link font-medium" style=padding-left:12px data-astro-cid-ydxbofl4 data-heading-depth=1 data-heading-slug=入手准备 data-index=0><svg height=1em width=1em data-icon=tabler:chevron-right class="h-4 w-4 absolute duration-200 icon-indicator left-1 opacity-0 text-primary transition-all" data-astro-cid-ydxbofl4=true><symbol id=ai:tabler:chevron-right viewBox="0 0 24 24"><path d="m9 6l6 6l-6 6" fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 /></symbol><use href=#ai:tabler:chevron-right></use></svg><span class="duration-200 link-text transition-transform" data-astro-cid-ydxbofl4>入手准备</span></a></li><li data-astro-cid-ydxbofl4><a href=#heading-1 class="flex items-center rounded-lg px-2 py-2 relative toc-link font-medium" style=padding-left:12px data-astro-cid-ydxbofl4 data-heading-depth=1 data-heading-slug=phase_1 data-index=1><svg height=1em width=1em data-icon=tabler:chevron-right class="h-4 w-4 absolute duration-200 icon-indicator left-1 opacity-0 text-primary transition-all" viewBox="0 0 24 24" data-astro-cid-ydxbofl4=true><use href=#ai:tabler:chevron-right></use></svg><span class="duration-200 link-text transition-transform" data-astro-cid-ydxbofl4>phase_1</span></a></li><li data-astro-cid-ydxbofl4><a href=#heading-2 class="flex items-center rounded-lg px-2 py-2 relative toc-link font-medium" style=padding-left:12px data-astro-cid-ydxbofl4 data-heading-depth=1 data-heading-slug=phase_2 data-index=2><svg height=1em width=1em data-icon=tabler:chevron-right class="h-4 w-4 absolute duration-200 icon-indicator left-1 opacity-0 text-primary transition-all" viewBox="0 0 24 24" data-astro-cid-ydxbofl4=true><use href=#ai:tabler:chevron-right></use></svg><span class="duration-200 link-text transition-transform" data-astro-cid-ydxbofl4>phase_2</span></a></li><li data-astro-cid-ydxbofl4><a href=#heading-3 class="flex items-center rounded-lg px-2 py-2 relative toc-link font-medium" style=padding-left:12px data-astro-cid-ydxbofl4 data-heading-depth=1 data-heading-slug=phase_3 data-index=3><svg height=1em width=1em data-icon=tabler:chevron-right class="h-4 w-4 absolute duration-200 icon-indicator left-1 opacity-0 text-primary transition-all" viewBox="0 0 24 24" data-astro-cid-ydxbofl4=true><use href=#ai:tabler:chevron-right></use></svg><span class="duration-200 link-text transition-transform" data-astro-cid-ydxbofl4>phase_3</span></a></li><li data-astro-cid-ydxbofl4><a href=#heading-4 class="flex items-center rounded-lg px-2 py-2 relative toc-link font-medium" style=padding-left:12px data-astro-cid-ydxbofl4 data-heading-depth=1 data-heading-slug=phase_4 data-index=4><svg height=1em width=1em data-icon=tabler:chevron-right class="h-4 w-4 absolute duration-200 icon-indicator left-1 opacity-0 text-primary transition-all" viewBox="0 0 24 24" data-astro-cid-ydxbofl4=true><use href=#ai:tabler:chevron-right></use></svg><span class="duration-200 link-text transition-transform" data-astro-cid-ydxbofl4>phase_4</span></a></li><li data-astro-cid-ydxbofl4><a href=#heading-5 class="flex items-center rounded-lg px-2 py-2 relative toc-link font-medium" style=padding-left:12px data-astro-cid-ydxbofl4 data-heading-depth=1 data-heading-slug=phase_5 data-index=5><svg height=1em width=1em data-icon=tabler:chevron-right class="h-4 w-4 absolute duration-200 icon-indicator left-1 opacity-0 text-primary transition-all" viewBox="0 0 24 24" data-astro-cid-ydxbofl4=true><use href=#ai:tabler:chevron-right></use></svg><span class="duration-200 link-text transition-transform" data-astro-cid-ydxbofl4>phase_5</span></a></li><li data-astro-cid-ydxbofl4><a href=#heading-6 class="flex items-center rounded-lg px-2 py-2 relative toc-link font-medium" style=padding-left:12px data-astro-cid-ydxbofl4 data-heading-depth=1 data-heading-slug=phase_6 data-index=6><svg height=1em width=1em data-icon=tabler:chevron-right class="h-4 w-4 absolute duration-200 icon-indicator left-1 opacity-0 text-primary transition-all" viewBox="0 0 24 24" data-astro-cid-ydxbofl4=true><use href=#ai:tabler:chevron-right></use></svg><span class="duration-200 link-text transition-transform" data-astro-cid-ydxbofl4>phase_6</span></a></li><li data-astro-cid-ydxbofl4><a href=#heading-7 class="flex items-center rounded-lg px-2 py-2 relative toc-link font-medium" style=padding-left:12px data-astro-cid-ydxbofl4 data-heading-depth=1 data-heading-slug=隐藏彩蛋 data-index=7><svg height=1em width=1em data-icon=tabler:chevron-right class="h-4 w-4 absolute duration-200 icon-indicator left-1 opacity-0 text-primary transition-all" viewBox="0 0 24 24" data-astro-cid-ydxbofl4=true><use href=#ai:tabler:chevron-right></use></svg><span class="duration-200 link-text transition-transform" data-astro-cid-ydxbofl4>隐藏彩蛋</span></a></li><li data-astro-cid-ydxbofl4><a href=#heading-8 class="flex items-center rounded-lg px-2 py-2 relative toc-link font-medium" style=padding-left:12px data-astro-cid-ydxbofl4 data-heading-depth=1 data-heading-slug=感受 data-index=8><svg height=1em width=1em data-icon=tabler:chevron-right class="h-4 w-4 absolute duration-200 icon-indicator left-1 opacity-0 text-primary transition-all" viewBox="0 0 24 24" data-astro-cid-ydxbofl4=true><use href=#ai:tabler:chevron-right></use></svg><span class="duration-200 link-text transition-transform" data-astro-cid-ydxbofl4>感受</span></a></li><li data-astro-cid-ydxbofl4><a href=#heading-9 class="flex items-center rounded-lg px-2 py-2 relative toc-link font-medium" style=padding-left:12px data-astro-cid-ydxbofl4 data-heading-depth=1 data-heading-slug=参考资料补充学习 data-index=9><svg height=1em width=1em data-icon=tabler:chevron-right class="h-4 w-4 absolute duration-200 icon-indicator left-1 opacity-0 text-primary transition-all" viewBox="0 0 24 24" data-astro-cid-ydxbofl4=true><use href=#ai:tabler:chevron-right></use></svg><span class="duration-200 link-text transition-transform" data-astro-cid-ydxbofl4>参考资料/补充学习</span></a></li><li data-astro-cid-ydxbofl4><a href=#heading-10 class="flex items-center rounded-lg px-2 py-2 relative toc-link" style=padding-left:28px data-astro-cid-ydxbofl4 data-heading-depth=2 data-heading-slug=别人的解法 data-index=10><svg height=1em width=1em data-icon=tabler:chevron-right class="h-4 w-4 absolute duration-200 icon-indicator left-1 opacity-0 text-primary transition-all" viewBox="0 0 24 24" data-astro-cid-ydxbofl4=true><use href=#ai:tabler:chevron-right></use></svg><span class="duration-200 link-text transition-transform" data-astro-cid-ydxbofl4>别人的解法</span></a></li><li data-astro-cid-ydxbofl4><a href=#heading-11 class="flex items-center rounded-lg px-2 py-2 relative toc-link" style=padding-left:28px data-astro-cid-ydxbofl4 data-heading-depth=2 data-heading-slug=gdb调试 data-index=11><svg height=1em width=1em data-icon=tabler:chevron-right class="h-4 w-4 absolute duration-200 icon-indicator left-1 opacity-0 text-primary transition-all" viewBox="0 0 24 24" data-astro-cid-ydxbofl4=true><use href=#ai:tabler:chevron-right></use></svg><span class="duration-200 link-text transition-transform" data-astro-cid-ydxbofl4>GDB调试</span></a></li></ul></nav></div></div></div><script type=module>document.addEventListener("astro:page-load",(()=>{const t=document.querySelector(".toc-nav"),e=document.getElementById("active-indicator"),n=Array.from(document.querySelectorAll(".toc-nav a"));if(!t||!e||0===n.length)return;const o=document.querySelectorAll("h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]");if(0===o.length)return;let i=null,r=!1,s=null;const c=new Map;function a(t,n=!0){if(!t)return;const o=parseInt(t.getAttribute("data-heading-depth")||"1");e.style.transition=n?"all 0.3s cubic-bezier(0.25, 0.1, 0.25, 1)":"opacity 0.3s ease-in-out",requestAnimationFrame((()=>{e.style.top=`${t.offsetTop}px`,e.style.height=`${t.offsetHeight}px`,e.style.opacity="1",e.style.left=16*(o-1)+"px",e.style.width=`calc(100% - ${16*(o-1)}px)`}))}function u(t,e){const n=t.getBoundingClientRect(),o=e.getBoundingClientRect();return n.top>=o.top&&n.bottom<=o.bottom}function l(e){i!==e&&(i&&i.classList.remove("active"),e.classList.add("active"),i=e,a(e),u(e,t)||function(e){if(u(e,t))return;const n=e.offsetTop,o=t.clientHeight,i=Math.max(0,n-o/2+e.offsetHeight/2);t.scrollTo({top:i,behavior:"smooth"})}(e))}o.forEach(((t,e)=>{const n=t.getAttribute("id"),o=`heading-${e}`;n&&n!==o&&(t.setAttribute("id",o),c.set(n,o),document.querySelectorAll(`a[href="#${n}"]:not(.toc-nav a)`).forEach((t=>t.setAttribute("href",`#${o}`))))})),t.addEventListener("click",(t=>{const e=t.target.closest("a");if(!e)return;t.preventDefault();const n=e.getAttribute("href")||"";if(!n||!n.startsWith("#"))return;const o=n.substring(1),i=document.getElementById(o);i&&(r=!0,l(e),i.scrollIntoView({behavior:"smooth"}),history.pushState(null,"",n),setTimeout((()=>{r=!1}),1e3))})),window.addEventListener("resize",(()=>{s&&clearTimeout(s),s=window.setTimeout((()=>{i&&a(i,!1)}),100)}),{passive:!0});const d=new IntersectionObserver((t=>{if(r)return;const e=t.filter((t=>t.isIntersecting));if(0===e.length)return;let n=e[0],o=1/0;for(const t of e){const e=Math.abs(t.boundingClientRect.top);e<o&&(o=e,n=t)}const s=n.target.getAttribute("id");if(!s)return;const c=document.querySelector(`.toc-nav a[href="#${s}"]`);c&&c!==i&&l(c)}),{rootMargin:"-50px 0px -75% 0px",threshold:[0,.25]});o.forEach((t=>d.observe(t))),setTimeout((()=>{const t=window.location.hash.substring(1),e=t?document.getElementById(t):o[0];if(e){const t=e.getAttribute("id");if(!t)return;const n=document.querySelector(`.toc-nav a[href="#${t}"]`);n&&l(n)}}),200),window.addEventListener("hashchange",(()=>{if(r)return;const t=window.location.hash.substring(1);if(t){if(r=!0,document.getElementById(t)){const e=document.querySelector(`.toc-nav a[href="#${t}"]`);e&&l(e)}setTimeout((()=>{r=!1}),1e3)}}))}))</script></div></aside></div></div><button class="btn btn-circle hover:scale-110 bg-base-100 btn-md fixed invisible opacity-0 right-6 shadow-lg transition-all z-50 bottom-20 md:hidden" aria-label="Table of Contents" id=mobile-toc-button onclick=mobile_toc_modal.showModal()><svg height=1em width=1em data-icon=lucide:list class="h-5 w-5"><symbol id=ai:lucide:list viewBox="0 0 24 24"><path d="M3 5h.01M3 12h.01M3 19h.01M8 5h13M8 12h13M8 19h13" fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 /></symbol><use href=#ai:lucide:list></use></svg></button><dialog class="modal md:hidden" id=mobile_toc_modal><div class="bg-base-100 max-w-md modal-box rounded-lg shadow-xl w-10/12"><div class="flex items-center border-b border-base-200 justify-between pb-4"><h3 class=font-medium>Table of Contents</h3><form method=dialog><button class="btn btn-circle btn-ghost" aria-label="Table of Contents"><svg height=1em width=1em data-icon=lucide:x class="h-5 w-5" viewBox="0 0 24 24"><use href=#ai:lucide:x></use></svg></button></form></div><div class="max-h-[70vh] overflow-auto pt-4"><ul class="menu-sm menu"><li class=my-1><a href=#入手准备 class="flex items-center rounded-lg hover:bg-base-200 mobile-toc-link transition-color" style=margin-left:0 data-mobile-heading-id=入手准备><span class="text-sm truncate">入手准备</span></a></li><li class=my-1><a href=#phase_1 class="flex items-center rounded-lg hover:bg-base-200 mobile-toc-link transition-color" style=margin-left:0 data-mobile-heading-id=phase_1><span class="text-sm truncate">phase_1</span></a></li><li class=my-1><a href=#phase_2 class="flex items-center rounded-lg hover:bg-base-200 mobile-toc-link transition-color" style=margin-left:0 data-mobile-heading-id=phase_2><span class="text-sm truncate">phase_2</span></a></li><li class=my-1><a href=#phase_3 class="flex items-center rounded-lg hover:bg-base-200 mobile-toc-link transition-color" style=margin-left:0 data-mobile-heading-id=phase_3><span class="text-sm truncate">phase_3</span></a></li><li class=my-1><a href=#phase_4 class="flex items-center rounded-lg hover:bg-base-200 mobile-toc-link transition-color" style=margin-left:0 data-mobile-heading-id=phase_4><span class="text-sm truncate">phase_4</span></a></li><li class=my-1><a href=#phase_5 class="flex items-center rounded-lg hover:bg-base-200 mobile-toc-link transition-color" style=margin-left:0 data-mobile-heading-id=phase_5><span class="text-sm truncate">phase_5</span></a></li><li class=my-1><a href=#phase_6 class="flex items-center rounded-lg hover:bg-base-200 mobile-toc-link transition-color" style=margin-left:0 data-mobile-heading-id=phase_6><span class="text-sm truncate">phase_6</span></a></li><li class=my-1><a href=#隐藏彩蛋 class="flex items-center rounded-lg hover:bg-base-200 mobile-toc-link transition-color" style=margin-left:0 data-mobile-heading-id=隐藏彩蛋><span class="text-sm truncate">隐藏彩蛋</span></a></li><li class=my-1><a href=#感受 class="flex items-center rounded-lg hover:bg-base-200 mobile-toc-link transition-color" style=margin-left:0 data-mobile-heading-id=感受><span class="text-sm truncate">感受</span></a></li><li class=my-1><a href=#参考资料补充学习 class="flex items-center rounded-lg hover:bg-base-200 mobile-toc-link transition-color" style=margin-left:0 data-mobile-heading-id=参考资料补充学习><span class="text-sm truncate">参考资料/补充学习</span></a></li><li class=my-1><a href=#别人的解法 class="flex items-center rounded-lg hover:bg-base-200 mobile-toc-link transition-color" style=margin-left:12px data-mobile-heading-id=别人的解法><span class="text-sm truncate">别人的解法</span></a></li><li class=my-1><a href=#gdb调试 class="flex items-center rounded-lg hover:bg-base-200 mobile-toc-link transition-color" style=margin-left:12px data-mobile-heading-id=gdb调试><span class="text-sm truncate">GDB调试</span></a></li></ul></div></div><form method=dialog class=modal-backdrop><button>close</button></form></dialog><script type=module>document.addEventListener("astro:page-load",(()=>{const e=document.getElementById("mobile-toc-button");if(!e)return;const t=document.querySelectorAll(".mobile-toc-link"),i=document.querySelectorAll("h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]");let o=null;const l=()=>{o||(o=setTimeout((()=>{window.scrollY>300?(e.classList.remove("opacity-0","invisible"),e.classList.add("opacity-100","visible")):(e.classList.remove("opacity-100","visible"),e.classList.add("opacity-0","invisible")),t.length>0&&i.length>0&&s(),o=null}),100))},s=()=>{let e=null;for(let t=i.length-1;t>=0;t--){const o=i[t];if(o.getBoundingClientRect().top<=100){e=o.id;break}}t.forEach((t=>{t.getAttribute("data-mobile-heading-id")===e?t.classList.add("bg-primary/10","font-medium"):t.classList.remove("bg-primary/10","font-medium")}))};window.addEventListener("scroll",l,{passive:!0}),l(),document.addEventListener("astro:before-swap",(()=>{window.removeEventListener("scroll",l),o&&clearTimeout(o)}))}))</script><script>!function(){const t="dracula";document.addEventListener("astro:after-swap",(()=>{const e=localStorage.getItem("theme");if(e){document.documentElement.setAttribute("data-theme",e);const n=e===t?"dark":"light";document.documentElement.setAttribute("data-theme-type",n)}}))}()</script><script>document.addEventListener("astro:page-load",(()=>{document.querySelectorAll(".btn-copy").forEach((e=>{e.addEventListener("click",(async()=>{const o=e.closest(".frosti-code").querySelector("code").textContent,c=e.querySelector(".frosti-code-toolbar-copy-icon"),s=e.querySelector(".frosti-code-toolbar-copy-success");try{await navigator.clipboard.writeText(o),c.classList.add("hidden"),s.classList.remove("hidden"),e.classList.add("copy-success"),setTimeout((()=>{c.classList.remove("hidden"),s.classList.add("hidden"),e.classList.remove("copy-success")}),2e3)}catch(e){console.error("Failed to copy:",e)}}))}))}))</script><style>.btn-copy{position:relative;overflow:hidden}.copy-success{animation:pulse .5s ease-in-out}.frosti-code-toolbar-copy-success svg{color:#10b981}@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.1)}100%{transform:scale(1)}}</style></body></html>