---
title: ç±»(Class) | ç°ä»£JavaScript
description: "ç±»(Class)è¿™ä¸€ç« çš„ç®€å•ç¬”è®°"
pubDate: 2025 10 13 
categories: 
  - tech
tags:
  - javascript
---

## è¯­æ³•

åŸºæœ¬è¯­æ³•:

```js
class MyClass {
  constructor() {}
  method1() {}
  method2() {}
}
```

ä½¿ç”¨ `new MyClass()`, æ¥åˆ›å»ºå®ä¾‹.è‡ªåŠ¨è°ƒç”¨ `constructor()` æ–¹æ³•.ç›¸å½“äºPythonä¸­çš„ `__init__()`
æ–¹æ³•.

## classæ˜¯ä»€ä¹ˆ

class æ˜¯ä¸€ç§å‡½æ•°ğŸ˜µâ€ğŸ’«.

`class User {...}`Â æ„é€ å®é™…ä¸Šåšäº†å¦‚ä¸‹çš„äº‹å„¿ï¼š

1. åˆ›å»ºä¸€ä¸ªåä¸ºÂ `User`Â çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°æˆä¸ºç±»å£°æ˜çš„ç»“æœã€‚è¯¥å‡½æ•°çš„ä»£ç æ¥è‡ªäºÂ `constructor`Â æ–¹æ³•ï¼ˆå¦‚æœæˆ‘ä»¬ä¸ç¼–å†™è¿™ç§æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒå°±è¢«å‡å®šä¸ºç©ºï¼‰ã€‚
2. å­˜å‚¨ç±»ä¸­çš„æ–¹æ³•ï¼Œä¾‹å¦‚Â `User.prototype`Â ä¸­çš„Â `sayHi`ã€‚

```js
alert(User === User.prototype.constructor); // true
```

> ä¸æ˜¯å¾ˆæ‡‚,å› ä¸ºæˆ‘è·³è¿‡äº† prototypeé‚£ç« 

## ç±»è¡¨è¾¾å¼

ç±»å¯ä»¥åœ¨å¦å¤–ä¸€ä¸ªè¡¨è¾¾å¼ä¸­è¢«å®šä¹‰,è¢«ä¼ é€’,è¢«è¿”å›,è¢«èµ‹å€¼ç­‰.

## Getterå’ŒSetter

```js
class User {
  constructor(name) {
    // è¿™é‡Œä¼šè°ƒç”¨ setter
    this.name = name;
  }

  get name() {
    return this._name;
  }

  set name(val) {
    if (val.length < 4) return;
    this._name = name;
  }
}
```

è¦æ³¨æ„ä¸‹åˆ’çº¿!

## å­—æ®µ

ç±»å…è®¸æ·»åŠ å­—æ®µ

ä¸¢å¤± `this` ä¸æ˜¯å¾ˆç†è§£

```js
class Button {
  constructor(val) {
    this.value = val;
  }
  click = () => {
    alert(this.value);
  }
}

let button = new Button("hello");
setTimeout(button.click, 1000);
```

## ç±»ç»§æ‰¿

è·ŸJavaçš„ä¸€æ ·, ç»§æ‰¿ç”¨çš„æ˜¯ `extends` å…³é”®å­—.ä½† `extends` åå…è®¸ä»»æ„è¡¨è¾¾å¼ğŸ¤”

```js
function f(phrase) {
  return class {
    sayHi() { alert(phrase); }
  }
}

class User extends f("Hello") {}
new User().sayHi();
```

ç»§æ‰¿çš„æ¦‚å¿µ: é‡å†™æ–¹æ³•

ç„¶è€Œé€šå¸¸ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›å®Œå…¨æ›¿æ¢çˆ¶ç±»çš„æ–¹æ³•ï¼Œè€Œæ˜¯å¸Œæœ›åœ¨çˆ¶ç±»æ–¹æ³•çš„åŸºç¡€ä¸Šè¿›è¡Œè°ƒæ•´æˆ–æ‰©å±•å…¶åŠŸèƒ½ã€‚æˆ‘ä»¬åœ¨æˆ‘ä»¬çš„æ–¹æ³•ä¸­åšä¸€äº›äº‹å„¿ï¼Œä½†æ˜¯åœ¨å®ƒä¹‹å‰æˆ–ä¹‹åæˆ–åœ¨è¿‡ç¨‹ä¸­ä¼šè°ƒç”¨çˆ¶ç±»æ–¹æ³•ã€‚

Class ä¸ºæ­¤æä¾›äº†Â `"super"`Â å…³é”®å­—ã€‚

- æ‰§è¡ŒÂ `super.method(...)`Â æ¥è°ƒç”¨ä¸€ä¸ªçˆ¶ç±»æ–¹æ³•ã€‚
- æ‰§è¡ŒÂ `super(...)`Â æ¥è°ƒç”¨ä¸€ä¸ªçˆ¶ç±» constructorï¼ˆåªèƒ½åœ¨æˆ‘ä»¬çš„ constructor ä¸­ï¼‰ã€‚

ç»§æ‰¿ç±»çš„ `constructor` å¿…é¡»è°ƒç”¨ `super(...)` ,å¹¶ä¸”å¿…é¡»åœ¨ä½¿ç”¨ `this` ä¹‹å‰.

# é™æ€å±æ€§å’Œé™æ€æ–¹æ³•

ç”¨ `static` å…³é”®å­—å¼€å¤´

é™æ€æ–¹æ³•åªèƒ½åœ¨ç±»ä¸Šè°ƒç”¨,è€Œä¸èƒ½åœ¨å•ä¸ªå¯¹è±¡ä¸Š.

é™æ€å±æ€§ç»‘å®šåœ¨ç±»,è€Œä¸æ˜¯å®ä¾‹.

è¿™ç‚¹æˆ‘ä»¬åº”è¯¥ä¹Ÿç†Ÿæ‚‰.

é™æ€å±æ€§å’Œæ–¹æ³•æ˜¯å¯è¢«ç»§æ‰¿çš„.

# ç§æœ‰çš„å’Œå—ä¿æŠ¤çš„å±æ€§å’Œæ–¹æ³•

ç§æœ‰å±æ€§é€šå¸¸ä»¥ä¸‹åˆ’çº¿ä½œä¸ºå‰ç¼€.ä½†è¿™ä¸æ˜¯å¼ºåˆ¶çš„.

é€šè¿‡åªè®¾ç½® `getter`, ä¸è®¾ç½® `setter`æ¥å®ç°åªè¯»å±æ€§.

## ç§æœ‰çš„"#"

è¿™æ˜¯ä¸€ä¸ªæœ€è¿‘æ·»åŠ çš„ JavaScript ç‰¹æ€§.æˆ‘çš„ nodeæ˜¯æ”¯æŒçš„.

ç§æœ‰å±æ€§å’Œæ–¹æ³•ä»¥ # å¼€å¤´,è¿™æ˜¯çœŸæ­£çš„ç§æœ‰,å¤–éƒ¨è®¿é—®ä¼šå‡ºé”™.

å°±é¢å‘å¯¹è±¡ç¼–ç¨‹(OOP)è€Œè¨€, å†…éƒ¨æ¥å£å’Œå¤–éƒ¨æ¥å£çš„åˆ’åˆ†ç§°ä¸º å°è£….å®ƒå…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹:

- ä¿æŠ¤ç”¨æˆ·
- å¯æ”¯æŒæ€§.å¦‚æœæˆ‘ä»¬ä¸¥æ ¼ç•Œå®šå†…éƒ¨æ¥å£,é‚£ä¹ˆè¿™ä¸ªç±»çš„å¼€å‘å¯ä»¥è‡ªç”±åœ°æ›´æ”¹å™¨å†…éƒ¨å±æ€§å’Œæ–¹æ³•,è€Œæ— éœ€é€šçŸ¥ç”¨æˆ·
- éšè—å¤æ‚æ€§

å—ä¿æŠ¤çš„å­—æ®µä»¥ `_` å¼€å¤´,è¿™æ˜¯ä¸€ä¸ªçº¦å®š,ä¸æ˜¯å¼ºåˆ¶çš„.

ç§æœ‰å­—æ®µä»¥ `#` å¼€å¤´,ä»è¯­è¨€çº§åˆ«ç¡®ä¿å®ƒç§æœ‰

# æ‹“å±•å†…å»ºç±»

å†…å»ºçš„ç±», å¦‚ `Array`, `Map` æ˜¯ extendable.

# ç±»æ£€æŸ¥

`someObj instanceof SomeClass`

ä¾‹å¦‚:

```js
class Rabbit {}
let rabbit = new Rabbit();

alert(rabbit instanceof Rabbit); // true

// æ„é€ å‡½æ•°
function Rabbit() {}

alert(new Rabbit() instanceof Rabbit); // true
```

`instanceof` åœ¨æ£€æŸ¥ä¸­ä¼šå°†åŸå‹é“¾è€ƒè™‘åœ¨å†….

```js
let arr = [1];
alert(arr instanceof Array); // true
alert(arr instanceof Object); // true
```

> æ¥ä¸‹æ¥çš„å†…å®¹å¤ªæ·±äº†,æˆ‘æ„Ÿè§‰å¯¹æˆ‘æ¥è¯´æ²¡æœ‰ç”¨,è¿™é‡Œç•¥è¿‡.
